(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3623],{3093:function(e,s,t){Promise.resolve().then(t.bind(t,1819))},1819:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return o}});var a=t(7437),l=t(2265),r=t(7648);function o(){let[e,s]=(0,l.useState)({items:[],total_price:0,total_items:0,is_empty:!0}),[t,o]=(0,l.useState)(!0),[i,c]=(0,l.useState)(null),[d,n]=(0,l.useState)("http://localhost/api/carrito/simple/"),m=async()=>{try{o(!0),c(null),console.log("\uD83D\uDD04 Cargando carrito desde: ".concat(d));let e=await fetch(d,{method:"GET",headers:{Accept:"application/json"},credentials:"include"});if(console.log("\uD83D\uDCE1 Status:",e.status,e.statusText),console.log("\uD83D\uDCE1 Headers:",Object.fromEntries(e.headers.entries())),!e.ok)throw Error("Error ".concat(e.status,": ").concat(e.statusText));let t=await e.json();console.log("✅ Datos recibidos:",t);let a={items:Array.isArray(t.items)?t.items:[],total_price:parseFloat(t.total_price)||0,total_items:parseInt(t.total_items)||0,is_empty:!!t.is_empty};s(a)}catch(e){console.error("❌ Error cargando carrito:",e),c(e instanceof Error?e.message:"Error desconocido")}finally{o(!1)}};return(0,l.useEffect)(()=>{m()},[d]),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"\uD83D\uDED2 Debug de Carrito"}),(0,a.jsxs)("div",{className:"mb-8 bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Panel de Control"}),(0,a.jsxs)("div",{className:"flex gap-4 flex-wrap",children:[(0,a.jsx)("button",{onClick:m,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",disabled:t,children:t?"Cargando...":"\uD83D\uDD04 Recargar Carrito"}),(0,a.jsx)("button",{onClick:()=>n("http://localhost/api/carrito/simple/"),className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600",children:"API Normal"}),(0,a.jsx)("button",{onClick:()=>n("http://localhost:8000/api/carrito/simple/"),className:"px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600",children:"API Directo (Puerto 8000)"})]}),(0,a.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:["URL actual: ",(0,a.jsx)("span",{className:"font-mono bg-gray-100 px-1 rounded",children:d})]})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Estado"}),t&&(0,a.jsx)("div",{className:"animate-spin h-5 w-5 border-2 border-blue-500 border-t-transparent rounded-full"})]}),i&&(0,a.jsxs)("div",{className:"bg-red-50 text-red-700 p-4 rounded-lg mb-4",children:["❌ Error: ",i]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Items"}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:e.total_items})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Total"}),(0,a.jsxs)("div",{className:"text-2xl font-bold",children:["$",e.total_price.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Productos"}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:e.items.length})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Estado"}),(0,a.jsx)("div",{className:"text-2xl font-bold",children:e.is_empty?"❌ Vac\xedo":"✅ Con productos"})]})]})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Productos en el Carrito"}),0===e.items.length?(0,a.jsx)("div",{className:"bg-yellow-50 p-4 rounded-lg text-yellow-700",children:"No hay productos en el carrito"}):(0,a.jsx)("div",{className:"bg-white rounded-lg shadow divide-y",children:e.items.map((e,s)=>(0,a.jsxs)("div",{className:"p-4 flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded flex items-center justify-center",children:e.producto.imagen?(0,a.jsx)("img",{src:"http://localhost".concat(e.producto.imagen),alt:e.producto.nombre,className:"max-h-full max-w-full object-contain"}):(0,a.jsx)("span",{className:"text-2xl",children:"\uD83C\uDF38"})}),(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsx)("div",{className:"font-medium",children:e.producto.nombre}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["$",Number(e.price).toFixed(2)," \xd7 ",e.quantity," = $",Number(e.total_price).toFixed(2)]})]})]},s))})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Datos Raw"}),(0,a.jsx)("pre",{className:"bg-gray-800 text-green-400 p-4 rounded-lg overflow-auto text-xs",children:JSON.stringify(e,null,2)})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)(r.default,{href:"/",className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"← Volver al Inicio"}),(0,a.jsx)(r.default,{href:"/checkout/multistep",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Ir al Checkout →"})]})]})}}},function(e){e.O(0,[7648,2971,2117,1744],function(){return e(e.s=3093)}),_N_E=e.O()}]);