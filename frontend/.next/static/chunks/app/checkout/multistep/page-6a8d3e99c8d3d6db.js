(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2205],{6284:function(e,a,r){Promise.resolve().then(r.bind(r,6011))},6011:function(e,a,r){"use strict";r.r(a);var t=r(7437),o=r(2265);let s=r(257).env.NEXT_PUBLIC_API_URL||"https://e-comerce-floreria-production.up.railway.app/api";a.default=()=>{let e;let[a,r]=(0,o.useState)(1),[n,i]=(0,o.useState)({items:[],total_price:0,total_items:0,is_empty:!0}),[l,c]=(0,o.useState)(!0),[d,m]=(0,o.useState)(!1);(0,o.useEffect)(()=>{(async()=>{try{c(!0),console.log("\uD83D\uDD04 Checkout - Cargando carrito directamente del API...");let e="".concat(s,"/carrito/simple/");console.log("\uD83D\uDCE1 Fetch URL:",e);let a=await fetch(e,{method:"GET",credentials:"include",headers:{Accept:"application/json"}});console.log("\uD83D\uDCE1 ".concat(e," - Status:"),a.status,a.statusText);let r=null;if(a.ok){let t=await a.json();console.log("✅ ".concat(e," - Datos:"),t),t&&Array.isArray(t.items)?(r=t,console.log("\uD83C\uDF89 ".concat(e," - \xa1Encontrados ").concat(t.items.length," productos!"))):console.log("⚠️ ".concat(e," - Carrito vac\xedo o inv\xe1lido"))}if(r){let e={items:Array.isArray(r.items)?r.items:[],total_price:parseFloat(r.total_price)||0,total_items:parseInt(r.total_items)||0,is_empty:!!r.is_empty};i(e),m(!1)}else throw Error("No se pudo cargar el carrito desde ning\xfan endpoint")}catch(e){console.error("❌ Checkout - Error cargando carrito:",e),m(!0)}finally{c(!1)}})()},[]);let x=[{id:1,title:"Remitente",icon:"\uD83D\uDC64"},{id:2,title:"Destinatario",icon:"\uD83D\uDCCD"},{id:3,title:"Dedicatoria",icon:"\uD83D\uDC8C"},{id:4,title:"Extras",icon:"\uD83C\uDF81"},{id:5,title:"Env\xedo",icon:"\uD83D\uDE9A"},{id:6,title:"Pago",icon:"\uD83D\uDCB3"}],[h,u]=(0,o.useState)({nombre:"",apellido:"",email:"",telefono:"",envioAnonimo:!1,nombreDestinatario:"",apellidoDestinatario:"",telefonoDestinatario:"",direccion:"",ciudad:"",codigoPostal:"",referencia:"",mensaje:"",firmadoComo:"",incluirTarjeta:!0,tarjetaPersonalizada:!1,textoTarjeta:"",osoDePerluche:!1,tipoOso:"clasico",metodoEnvio:"express",fecha:"",hora:"",instrucciones:"",metodoPago:"mercadopago",aceptaTerminos:!1}),[g,p]=(0,o.useState)({}),[f,j]=(0,o.useState)(!1),b=(e,a)=>{let r="";switch(e){case"nombre":case"nombreDestinatario":r=a.trim()?"":"Este campo es obligatorio";break;case"email":a.trim()?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(a)||(r="Email inv\xe1lido (ejemplo: nombre@dominio.com)"):r="El email es obligatorio";break;case"telefono":case"telefonoDestinatario":a.trim()?/^\d{7,15}$/.test(a.replace(/[\s-]/g,""))||(r="Tel\xe9fono inv\xe1lido (solo n\xfameros, 7-15 d\xedgitos)"):r="El tel\xe9fono es obligatorio";break;case"direccion":r=a.trim()?"":"La direcci\xf3n es obligatoria";break;case"ciudad":r=a.trim()?"":"La ciudad es obligatoria";break;case"fecha":r="programado"!==h.metodoEnvio||a?"":"Selecciona una fecha para el env\xedo programado";break;case"aceptaTerminos":r=a?"":"Debes aceptar los t\xe9rminos y condiciones"}return r&&console.log("❌ Campo ".concat(e," inv\xe1lido:"),r),r},v=()=>{console.log("\uD83D\uDD0D Validando paso ".concat(a,"..."));let e={};switch(a){case 1:console.log("\uD83D\uDC64 Validando datos del remitente"),h.envioAnonimo?console.log("El env\xedo es an\xf3nimo, no se validan datos del remitente"):(e.nombre=b("nombre",h.nombre),e.email=b("email",h.email),e.telefono=b("telefono",h.telefono));break;case 2:console.log("\uD83D\uDCCD Validando datos del destinatario"),e.nombreDestinatario=b("nombreDestinatario",h.nombreDestinatario),e.telefonoDestinatario=b("telefonoDestinatario",h.telefonoDestinatario),e.direccion=b("direccion",h.direccion),e.ciudad=b("ciudad",h.ciudad);break;case 5:console.log("\uD83D\uDE9A Validando datos de env\xedo"),"programado"===h.metodoEnvio&&(e.fecha=b("fecha",h.fecha));break;case 6:console.log("\uD83D\uDCB3 Validando datos de pago"),e.aceptaTerminos=b("aceptaTerminos",h.aceptaTerminos)}let r=Object.fromEntries(Object.entries(e).filter(e=>{let[a,r]=e;return""!==r}));return p(r),0===Object.keys(r).length},D=e=>{let{name:a,value:r,type:t}=e.target,o=e.target.checked,s="checkbox"===t?o:r;u(e=>({...e,[a]:s}));let n=b(a,s);console.log("Validando campo ".concat(a," en tiempo real:"),n?"❌ ERROR: ".concat(n):"✅ OK"),p(e=>({...e,[a]:n}))},N=async()=>{let e=v();if(j(!0),!e){console.log("❌ Error de validaci\xf3n en el paso final");return}try{console.log("\uD83D\uDE80 INICIANDO CREACI\xd3N DE PEDIDO"),alert("\uD83D\uDE80 Iniciando creaci\xf3n de pedido..."),console.log("\uD83D\uDCE1 Haciendo request a carrito...");let e=await fetch("".concat(s,"/carrito/"),{method:"GET",credentials:"include"});console.log("\uD83D\uDCE1 Response status carrito:",e.status);let a=await e.json();if(console.log("\uD83D\uDCE6 Estado del carrito completo:",JSON.stringify(a,null,2)),!a.items||0===a.items.length){console.log("❌ CARRITO VAC\xcdO - items:",a.items),alert("❌ El carrito est\xe1 vac\xedo. Agrega productos antes de finalizar el pedido.");return}console.log("✅ CARRITO V\xc1LIDO: ".concat(a.items.length," productos")),alert("✅ Carrito verificado: ".concat(a.items.length," productos por $").concat(a.total_price)),console.log("\uD83D\uDCE1 Enviando pedido a simple-checkout...");let r=new Date;r.setDate(r.getDate()+1),0===r.getDay()&&r.setDate(r.getDate()+1);let t=r.toISOString().split("T")[0],o=s.replace("/api","");console.log("\uD83D\uDC40 Valores del formulario:",{nombre:h.nombre,email:h.email,telefono:h.telefono,nombreDestinatario:h.nombreDestinatario,direccion:h.direccion}),console.log("\uD83D\uDD17 URL de la API:","".concat(o,"/api/pedidos/simple-checkout/"));let n=await fetch("".concat(o,"/api/pedidos/simple-checkout/"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({nombre_comprador:h.nombre?h.nombre.trim():"Cliente Web",email_comprador:h.email?h.email.trim():"cliente@floreriacristina.com",telefono_comprador:h.telefono?h.telefono.trim():"1123456789",nombre_destinatario:h.nombreDestinatario?h.nombreDestinatario.trim():"Destinatario",telefono_destinatario:h.telefonoDestinatario?h.telefonoDestinatario.trim():"1123456789",direccion:h.direccion?h.direccion.trim():"Direcci\xf3n de prueba 123",ciudad:h.ciudad?h.ciudad.trim():"Buenos Aires",codigo_postal:h.codigoPostal?h.codigoPostal.trim():"1000",fecha_entrega:t,franja_horaria:"ma\xf1ana",metodo_envio_id:1,dedicatoria:h.mensaje||"Entrega de Florer\xeda Cristina",instrucciones:h.instrucciones||"",regalo_anonimo:!1,medio_pago:h.metodoPago})}),i=await n.json();if(console.log("\uD83D\uDCCB Respuesta del servidor:",i),i.details){console.log("⚠️ CAMPOS CON ERROR:",i.details),Object.entries(i.details).forEach(e=>{let[a,r]=e;console.error("Campo con error: ".concat(a," - ").concat(JSON.stringify(r)))});let e=Object.entries(i.details).map(e=>{let[a,r]=e;return"".concat(a,": ").concat(JSON.stringify(r))}).join("\n");alert("❌ Error de validaci\xf3n:\n".concat(e))}if(n.ok){if(alert("\uD83C\uDF89 \xa1Pedido #".concat(i.numero_pedido," creado exitosamente! ID: ").concat(i.pedido_id)),"mercadopago"===h.metodoPago)try{console.log("\uD83D\uDCB3 Creando preferencia de MercadoPago...");let e=await fetch("".concat(o,"/api/pedidos/simple/").concat(i.pedido_id,"/payment/"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}),a=await e.json();console.log("\uD83D\uDCB3 Respuesta de pago:",a),a.success?(console.log("✅ Preferencia creada, redirigiendo a MercadoPago..."),window.location.href=a.init_point):(alert("❌ Error al crear el pago: ".concat(a.error||"Error desconocido")),console.error("Error de pago:",a))}catch(e){console.error("Error creating payment preference:",e),alert("❌ Error al procesar el pago. Pedido creado pero pago pendiente.")}else window.location.href="/checkout/success?pedido=".concat(i.pedido_id)}else console.error("❌ ERROR COMPLETO:",i)}catch(a){let e=a instanceof Error?a.message:"Error desconocido";alert("❌ Error de conexi\xf3n: ".concat(e)),console.error("Connection error:",a)}};return l?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 border-4 border-gray-300 border-t-green-600 rounded-full animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Cargando tu carrito directamente..."})]})}):d?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsxs)("div",{className:"text-center max-w-md mx-auto px-4",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"⚠️"}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Error de Conexi\xf3n"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"No pudimos cargar tu carrito. Por favor intenta nuevamente."}),(0,t.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition",children:"Reintentar"})]})}):n.items&&0!==n.items.length?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-green-50/30",children:(0,t.jsxs)("div",{className:"container mx-auto px-6 py-16 max-w-4xl",children:[(0,t.jsxs)("div",{className:"text-center mb-12",children:[(0,t.jsxs)("h1",{className:"text-4xl font-extralight text-gray-900 mb-4",children:[(0,t.jsx)("span",{className:"text-green-500",children:"Florer\xeda"})," Cristina"]}),(0,t.jsxs)("p",{className:"text-lg text-gray-600",children:["Paso ",a," de 6: ",(0,t.jsx)("span",{className:"font-medium text-green-600",children:x[a-1].title})]})]}),(0,t.jsx)("div",{className:"flex justify-center mb-12 overflow-hidden",children:(0,t.jsxs)("div",{className:"hidden md:flex relative max-w-3xl w-full px-10",children:[(0,t.jsx)("div",{className:"absolute top-5 left-0 w-full h-0.5 bg-gray-200 z-0"}),(0,t.jsx)("div",{className:"flex justify-between w-full relative z-10",children:x.map(e=>(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-2 transition-transform duration-300 ".concat(a===e.id?"scale-110":""),children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-lg \n                    ".concat(a>e.id?"bg-green-500 text-white":"","\n                    ").concat(a===e.id?"bg-green-100 border-2 border-green-500 ring-4 ring-green-50 text-green-600":"","\n                    ").concat(a<e.id?"bg-gray-100 border-2 border-gray-300 text-gray-400":"","\n                    transition-all duration-300 shadow-sm"),children:a>e.id?"✓":e.icon}),(0,t.jsx)("div",{className:"text-xs font-medium ".concat(a===e.id?"text-green-600":a>e.id?"text-gray-700":"text-gray-400"),children:e.title})]},e.id))})]})}),(0,t.jsxs)("div",{className:"bg-white/60 backdrop-blur-sm rounded-3xl p-8 shadow-xl mb-8",children:[1===a&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-light mb-6",children:"\uD83D\uDC64 Datos del Remitente"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("input",{name:"nombre",value:h.nombre,onChange:D,className:"p-4 rounded-xl ".concat(g.nombre?"border-2 border-red-500 bg-red-50 shadow-md shadow-red-300/30":"bg-white/50 border-0"),placeholder:"Nombre",disabled:h.envioAnonimo}),g.nombre&&(0,t.jsxs)("span",{className:"text-red-600 font-medium text-sm mt-1",children:["⚠️ ",g.nombre]})]}),(0,t.jsx)("input",{name:"apellido",value:h.apellido,onChange:D,className:"p-4 rounded-xl bg-white/50 border-0",placeholder:"Apellido"}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("label",{htmlFor:"email",className:"sr-only",children:"Email"}),(0,t.jsx)("input",{id:"email",name:"email",type:"email",value:h.email,onChange:D,className:"p-4 rounded-xl ".concat(g.email?"border-2 border-red-500 bg-red-50 shadow-md shadow-red-300/30":"bg-white/50 border-0"),placeholder:"Email",disabled:h.envioAnonimo,"aria-required":"true","aria-invalid":"false",...g.email&&{"aria-invalid":"true"},"aria-describedby":g.email?"email-error":void 0}),g.email&&(0,t.jsxs)("span",{id:"email-error",className:"text-red-600 font-medium text-sm mt-1",children:["⚠️ ",g.email]})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("label",{htmlFor:"telefono",className:"sr-only",children:"Tel\xe9fono"}),(0,t.jsx)("input",{id:"telefono",name:"telefono",value:h.telefono,onChange:D,className:"p-4 rounded-xl ".concat(g.telefono?"border-2 border-red-500 bg-red-50 shadow-md shadow-red-300/30":"bg-white/50 border-0"),placeholder:"Tel\xe9fono (solo n\xfameros, m\xednimo 7 d\xedgitos)",disabled:h.envioAnonimo,"aria-required":"true","aria-invalid":"false",...g.telefono&&{"aria-invalid":"true"},"aria-describedby":g.telefono?"telefono-error":void 0}),g.telefono&&(0,t.jsxs)("span",{id:"telefono-error",className:"text-red-600 font-medium text-sm mt-1",children:["⚠️ ",g.telefono]})]})]}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",name:"envioAnonimo",checked:h.envioAnonimo,onChange:D,className:"mr-2"}),(0,t.jsx)("span",{children:"Env\xedo an\xf3nimo"})]})})]}),2===a&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-light mb-6",children:"\uD83D\uDCCD Datos del Destinatario"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("input",{name:"nombreDestinatario",value:h.nombreDestinatario,onChange:D,className:"p-4 rounded-xl bg-white/50 border-0 ".concat(g.nombreDestinatario?"border-2 border-red-300 bg-red-50/10":""),placeholder:"Nombre destinatario"}),g.nombreDestinatario&&(0,t.jsx)("span",{className:"text-red-600 text-sm mt-1",children:g.nombreDestinatario})]}),(0,t.jsx)("input",{name:"apellidoDestinatario",value:h.apellidoDestinatario,onChange:D,className:"p-4 rounded-xl bg-white/50 border-0",placeholder:"Apellido destinatario"}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("input",{name:"telefonoDestinatario",value:h.telefonoDestinatario,onChange:D,className:"p-4 rounded-xl bg-white/50 border-0 ".concat(g.telefonoDestinatario?"border-2 border-red-300 bg-red-50/10":""),placeholder:"Tel\xe9fono"}),g.telefonoDestinatario&&(0,t.jsx)("span",{className:"text-red-600 text-sm mt-1",children:g.telefonoDestinatario})]}),(0,t.jsx)("input",{name:"codigoPostal",value:h.codigoPostal,onChange:D,className:"p-4 rounded-xl bg-white/50 border-0",placeholder:"C\xf3digo Postal"})]}),(0,t.jsxs)("div",{className:"flex flex-col w-full mt-4",children:[(0,t.jsx)("input",{name:"direccion",value:h.direccion,onChange:D,className:"w-full p-4 rounded-xl bg-white/50 border-0 ".concat(g.direccion?"border-2 border-red-300 bg-red-50/10":""),placeholder:"Direcci\xf3n completa"}),g.direccion&&(0,t.jsx)("span",{className:"text-red-600 text-sm mt-1",children:g.direccion})]}),(0,t.jsxs)("div",{className:"flex flex-col w-full mt-4",children:[(0,t.jsx)("input",{name:"ciudad",value:h.ciudad,onChange:D,className:"w-full p-4 rounded-xl bg-white/50 border-0 ".concat(g.ciudad?"border-2 border-red-300 bg-red-50/10":""),placeholder:"Ciudad"}),g.ciudad&&(0,t.jsx)("span",{className:"text-red-600 text-sm mt-1",children:g.ciudad})]})]}),3===a&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-light mb-6",children:"\uD83D\uDC8C Dedicatoria"}),(0,t.jsx)("textarea",{name:"mensaje",value:h.mensaje,onChange:D,className:"w-full p-4 rounded-xl bg-white/50 border-0 h-32",placeholder:"Mensaje especial..."}),(0,t.jsx)("input",{name:"firmadoComo",value:h.firmadoComo,onChange:D,className:"w-full p-4 rounded-xl bg-white/50 border-0 mt-4",placeholder:"Firmado como (opcional)"}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",name:"incluirTarjeta",checked:h.incluirTarjeta,onChange:D,className:"mr-2"}),(0,t.jsx)("span",{children:"Incluir tarjeta con el mensaje"})]})})]}),4===a&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-light mb-6",children:"\uD83C\uDF81 Extras Especiales"}),(0,t.jsx)("div",{className:"bg-white/30 rounded-xl p-6 mb-6",children:(0,t.jsxs)("label",{className:"flex items-start cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",name:"tarjetaPersonalizada",checked:h.tarjetaPersonalizada,onChange:D,className:"mr-4 mt-1"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"font-medium text-lg",children:"\uD83D\uDCDD Tarjeta Personalizada"}),(0,t.jsx)("span",{className:"text-green-600 font-semibold",children:"+$5.000"})]}),(0,t.jsx)("p",{className:"text-gray-600 text-sm mb-3",children:"Agrega una tarjeta especial con tu mensaje personalizado"}),h.tarjetaPersonalizada&&(0,t.jsx)("textarea",{name:"textoTarjeta",value:h.textoTarjeta,onChange:D,className:"w-full p-3 rounded-lg bg-white/70 border-0 h-20",placeholder:"Escribe tu mensaje para la tarjeta personalizada..."})]})]})}),(0,t.jsx)("div",{className:"bg-white/30 rounded-xl p-6",children:(0,t.jsxs)("label",{className:"flex items-start cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",name:"osoDePerluche",checked:h.osoDePerluche,onChange:D,className:"mr-4 mt-1"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"font-medium text-lg",children:"\uD83E\uDDF8 Oso de Peluche"}),(0,t.jsx)("span",{className:"text-green-600 font-semibold",children:"+$15.000"})]}),(0,t.jsx)("p",{className:"text-gray-600 text-sm mb-3",children:"Acompa\xf1a tu regalo con un tierno oso de peluche"}),h.osoDePerluche&&(0,t.jsxs)("select",{name:"tipoOso",value:h.tipoOso,onChange:D,className:"w-full p-3 rounded-lg bg-white/70 border-0",children:[(0,t.jsx)("option",{value:"clasico",children:"\uD83E\uDD0E Oso Cl\xe1sico Marr\xf3n"}),(0,t.jsx)("option",{value:"blanco",children:"\uD83E\uDD0D Oso Blanco Suave"}),(0,t.jsx)("option",{value:"rosa",children:"\uD83D\uDC97 Oso Rosa Rom\xe1ntico"}),(0,t.jsx)("option",{value:"gigante",children:"\uD83E\uDDF8 Oso Gigante (50cm)"})]})]})]})})]}),5===a&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-light mb-6",children:"\uD83D\uDE9A M\xe9todo de Env\xedo"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"Selecciona c\xf3mo deseas que entregemos tus flores"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("label",{className:"flex flex-col h-full p-6 rounded-xl cursor-pointer transition-all duration-200 ".concat("express"===h.metodoEnvio?"bg-green-50 border-2 border-green-500 shadow-lg":"bg-white/50 hover:shadow-md border-2 border-transparent"),children:[(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("input",{type:"radio",name:"metodoEnvio",value:"express",checked:"express"===h.metodoEnvio,onChange:D,className:"mr-4 mt-1"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"font-medium text-lg",children:"Env\xedo Express"}),(0,t.jsx)("span",{className:"text-green-600 font-medium",children:"Gratis"})]}),(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-600 mb-2",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"mr-2 text-green-600",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Entrega el mismo d\xeda (2-4 horas)"]})]})]}),(0,t.jsxs)("div",{className:"mt-4 text-sm bg-green-50 p-3 rounded text-green-700 border border-green-100",children:[(0,t.jsx)("strong",{children:"Recomendado:"})," Ideal para ocasiones especiales y entregas urgentes."]})]}),(0,t.jsxs)("label",{className:"flex flex-col h-full p-6 rounded-xl cursor-pointer transition-all duration-200 ".concat("programado"===h.metodoEnvio?"bg-blue-50 border-2 border-blue-500 shadow-lg":"bg-white/50 hover:shadow-md border-2 border-transparent"),children:[(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("input",{type:"radio",name:"metodoEnvio",value:"programado",checked:"programado"===h.metodoEnvio,onChange:D,className:"mr-4 mt-1"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"font-medium text-lg",children:"Env\xedo Programado"}),(0,t.jsx)("span",{className:"text-blue-600 font-medium",children:"$5.000"})]}),(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-600 mb-2",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"mr-2 text-blue-600",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Elige fecha y hora espec\xedfica"]})]})]}),(0,t.jsxs)("div",{className:"mt-4 text-sm bg-blue-50 p-3 rounded text-blue-700 border border-blue-100",children:[(0,t.jsx)("strong",{children:"Planificado:"})," Perfecto para aniversarios, cumplea\xf1os y eventos programados."]})]})]}),"programado"===h.metodoEnvio&&(0,t.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("input",{type:"date",name:"fecha",value:h.fecha,onChange:D,className:"p-4 rounded-xl bg-white/50 border-0 ".concat(g.fecha?"border-2 border-red-300 bg-red-50/10":"")}),g.fecha&&(0,t.jsx)("span",{className:"text-red-600 text-sm mt-1",children:g.fecha})]}),(0,t.jsx)("input",{type:"time",name:"hora",value:h.hora,onChange:D,className:"p-4 rounded-xl bg-white/50 border-0"})]}),(0,t.jsx)("textarea",{name:"instrucciones",value:h.instrucciones,onChange:D,className:"w-full p-4 rounded-xl bg-white/50 border-0 h-20",placeholder:"Instrucciones especiales de entrega..."})]})]}),6===a&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-light mb-6",children:"\uD83D\uDCB3 M\xe9todo de Pago"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"Selecciona c\xf3mo deseas pagar tu compra"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,t.jsxs)("label",{className:"flex flex-col h-full p-5 rounded-xl cursor-pointer transition-all duration-200 ".concat("mercadopago"===h.metodoPago?"bg-blue-50 border-2 border-blue-500 shadow-lg":"bg-white/50 hover:bg-blue-50/30 hover:shadow-md border-2 border-transparent"),children:[(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("input",{type:"radio",name:"metodoPago",value:"mercadopago",checked:"mercadopago"===h.metodoPago,onChange:D,className:"mr-3 mt-1"}),(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"font-medium",children:"MercadoPago"})})]}),(0,t.jsx)("div",{className:"mt-3 flex justify-center",children:(0,t.jsx)("img",{src:"/images/mercadopago.png",alt:"MercadoPago",className:"h-10",onError:e=>{e.currentTarget.src="https://imgmp.mlstatic.com/org-img/banners/ar/medios/online/468X60.jpg",e.currentTarget.className="h-8"}})}),(0,t.jsx)("div",{className:"mt-3 text-xs text-gray-600 text-center",children:"Tarjetas de cr\xe9dito/d\xe9bito"})]}),(0,t.jsxs)("label",{className:"flex flex-col h-full p-5 rounded-xl cursor-pointer transition-all duration-200 ".concat("transferencia"===h.metodoPago?"bg-green-50 border-2 border-green-500 shadow-lg":"bg-white/50 hover:bg-green-50/30 hover:shadow-md border-2 border-transparent"),children:[(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("input",{type:"radio",name:"metodoPago",value:"transferencia",checked:"transferencia"===h.metodoPago,onChange:D,className:"mr-3 mt-1"}),(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"font-medium",children:"Transferencia"})})]}),(0,t.jsx)("div",{className:"mt-3 flex justify-center text-3xl",children:"\uD83C\uDFE6"}),(0,t.jsx)("div",{className:"mt-3 text-xs text-gray-600 text-center",children:"Transferencia bancaria"})]}),(0,t.jsxs)("label",{className:"flex flex-col h-full p-5 rounded-xl cursor-pointer transition-all duration-200 ".concat("efectivo"===h.metodoPago?"bg-yellow-50 border-2 border-yellow-500 shadow-lg":"bg-white/50 hover:bg-yellow-50/30 hover:shadow-md border-2 border-transparent"),children:[(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("input",{type:"radio",name:"metodoPago",value:"efectivo",checked:"efectivo"===h.metodoPago,onChange:D,className:"mr-3 mt-1"}),(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"font-medium",children:"Efectivo"})})]}),(0,t.jsx)("div",{className:"mt-3 flex justify-center text-3xl",children:"\uD83D\uDCB5"}),(0,t.jsx)("div",{className:"mt-3 text-xs text-gray-600 text-center",children:"Pago al recibir"})]})]}),"transferencia"===h.metodoPago&&(0,t.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg mb-6 border border-green-100",children:[(0,t.jsxs)("h4",{className:"font-medium mb-2 flex items-center",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"mr-2 text-green-600",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Datos para transferencia:"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-gray-600",children:[(0,t.jsx)("strong",{children:"Banco:"})," Banco de Argentina"]}),(0,t.jsxs)("p",{className:"text-gray-600",children:[(0,t.jsx)("strong",{children:"Titular:"})," Florer\xeda Cristina S.A."]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-gray-600",children:[(0,t.jsx)("strong",{children:"CBU:"})," 0000000000000000000000"]}),(0,t.jsxs)("p",{className:"text-gray-600",children:[(0,t.jsx)("strong",{children:"CUIT:"})," 30-12345678-9"]})]})]})]}),(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("label",{className:"flex items-start",children:[(0,t.jsx)("input",{type:"checkbox",name:"aceptaTerminos",checked:h.aceptaTerminos,onChange:D,className:"mr-3 mt-1 ".concat(g.aceptaTerminos?"outline outline-2 outline-red-300":"")}),(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:["Acepto los ",(0,t.jsx)("span",{className:"text-green-600 underline cursor-pointer",children:"t\xe9rminos y condiciones"})," y la ",(0,t.jsx)("span",{className:"text-green-600 underline cursor-pointer",children:"pol\xedtica de privacidad"})]})]}),g.aceptaTerminos&&(0,t.jsx)("span",{className:"text-red-600 text-sm mt-1",children:g.aceptaTerminos})]})})]})]}),(0,t.jsxs)("div",{className:"flex justify-between mt-8",children:[a>1?(0,t.jsxs)("button",{onClick:()=>{a>1&&(r(a-1),j(!1))},className:"px-6 py-3 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 flex items-center gap-2 transition-all shadow-sm hover:shadow",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,t.jsx)("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),"Anterior"]}):(0,t.jsx)("div",{}),a<6?(0,t.jsxs)("div",{className:"flex flex-col items-end",children:[f&&Object.keys(g).length>0&&(0,t.jsx)("p",{className:"text-red-500 text-sm mb-2",children:"Por favor, completa correctamente todos los campos requeridos."}),(0,t.jsxs)("button",{onClick:()=>{let e=v();if(j(!0),console.log("Validaci\xf3n de formulario:",e?"✅ Paso v\xe1lido":"❌ Hay errores en el formulario"),console.log("Errores:",g),e&&a<6)r(a+1),j(!1);else{let e=Object.entries(g).filter(e=>{let[a,r]=e;return""!==r}).map(e=>{let[a,r]=e;return"- ".concat(a,": ").concat(r)}).join("\n");alert("⚠️ ERRORES DE VALIDACI\xd3N\n\n".concat(e,"\n\nPor favor, corrige estos campos antes de continuar."))}},className:"px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:shadow-md transition-all flex items-center gap-2 font-medium",children:["Siguiente",(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,t.jsx)("path",{d:"M5 12h14M12 5l7 7-7 7"})})]})]}):(0,t.jsxs)("div",{className:"flex flex-col items-end",children:[f&&Object.keys(g).length>0&&(0,t.jsx)("p",{className:"text-red-500 text-sm mb-2",children:"Debes aceptar los t\xe9rminos y condiciones para continuar."}),(0,t.jsxs)("button",{onClick:N,className:"px-8 py-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:shadow-lg transition-all text-lg font-medium flex items-center gap-2",children:[(0,t.jsx)("span",{children:"Confirmar Pedido"}),(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,t.jsx)("path",{d:"M5 12h14M12 5l7 7-7 7"})})]})]})]}),(0,t.jsxs)("div",{className:"mt-8 bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[(0,t.jsxs)("h3",{className:"text-lg font-medium mb-4 flex items-center gap-2",children:[(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14"}),(0,t.jsx)("path",{d:"M16.5 9.4 7.55 4.24"}),(0,t.jsx)("polyline",{points:"3.29 7 12 12 20.71 7"}),(0,t.jsx)("line",{x1:"12",y1:"22",x2:"12",y2:"12"}),(0,t.jsx)("circle",{cx:"18.5",cy:"15.5",r:"2.5"}),(0,t.jsx)("path",{d:"M20.27 17.27 22 19"})]}),(0,t.jsx)("span",{children:"Resumen del pedido"})]}),(null==n?void 0:n.items)&&n.items.length>0?(0,t.jsx)("div",{className:"space-y-3 mb-4 divide-y divide-gray-100",children:n.items.map((e,a)=>(0,t.jsxs)("div",{className:"flex justify-between items-center pt-3 first:pt-0",children:[(0,t.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,t.jsx)("div",{className:"bg-gray-50 w-12 h-12 rounded-lg flex items-center justify-center text-xl",children:"\uD83C\uDF38"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-gray-800",children:e.producto.nombre}),(0,t.jsxs)("div",{className:"text-sm text-gray-500 flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"px-2 py-0.5 bg-green-50 text-green-700 rounded-full text-xs",children:["Cantidad: ",e.quantity]}),(0,t.jsx)("span",{className:"text-gray-400",children:"|"}),(0,t.jsxs)("span",{children:["$",Number(e.price).toFixed(2)," c/u"]})]})]})]}),(0,t.jsxs)("div",{className:"font-medium text-green-600",children:["$",(Number(e.price)*e.quantity).toFixed(2)]})]},a))}):(0,t.jsxs)("div",{className:"text-red-500 mb-4 p-3 bg-red-50 rounded-lg",children:["⚠️ No hay productos en el carrito",(0,t.jsx)("br",{}),(0,t.jsx)("button",{onClick:()=>window.location.href="/",className:"mt-2 text-sm text-blue-600 hover:text-blue-800",children:"Ir a agregar productos"})]}),h.tarjetaPersonalizada&&(0,t.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,t.jsx)("span",{children:"\uD83D\uDCDD Tarjeta Personalizada"}),(0,t.jsx)("span",{children:"+$5.000"})]}),h.osoDePerluche&&(0,t.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,t.jsx)("span",{children:"\uD83E\uDDF8 Oso de Peluche"}),(0,t.jsx)("span",{children:"+$15.000"})]}),"programado"===h.metodoEnvio&&(0,t.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,t.jsx)("span",{children:"\uD83D\uDE9A Env\xedo Programado"}),(0,t.jsx)("span",{children:"+$5.000"})]}),(0,t.jsxs)("div",{className:"border-t border-gray-100 pt-4 mt-4 space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,t.jsx)("span",{children:"Subtotal"}),(0,t.jsxs)("span",{children:["$",n.total_price.toFixed(2)]})]}),h.tarjetaPersonalizada&&(0,t.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,t.jsx)("span",{children:"Tarjeta personalizada"}),(0,t.jsx)("span",{children:"$5,000.00"})]}),h.osoDePerluche&&(0,t.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,t.jsx)("span",{children:"Oso de peluche"}),(0,t.jsx)("span",{children:"$15,000.00"})]}),"programado"===h.metodoEnvio&&(0,t.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,t.jsx)("span",{children:"Env\xedo programado"}),(0,t.jsx)("span",{children:"$5,000.00"})]}),(0,t.jsxs)("div",{className:"flex justify-between font-semibold text-lg text-green-700 pt-2 border-t border-dashed border-gray-100",children:[(0,t.jsx)("span",{children:"Total"}),(0,t.jsxs)("span",{children:["$",(e=n.total_price||0,h.tarjetaPersonalizada&&(e+=5e3),h.osoDePerluche&&(e+=15e3),"programado"===h.metodoEnvio&&(e+=5e3),e).toFixed(2)]})]})]})]})]})}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsxs)("div",{className:"text-center max-w-md mx-auto px-4",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDED2"}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Carrito Vac\xedo"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Tu carrito est\xe1 vac\xedo. Agrega productos antes de continuar al checkout."}),(0,t.jsx)("button",{onClick:()=>window.location.href="/",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition",children:"Ver Productos"})]})})}},257:function(e,a,r){"use strict";var t,o;e.exports=(null==(t=r.g.process)?void 0:t.env)&&"object"==typeof(null==(o=r.g.process)?void 0:o.env)?r.g.process:r(4227)},4227:function(e){!function(){var a={229:function(e){var a,r,t,o=e.exports={};function s(){throw Error("setTimeout has not been defined")}function n(){throw Error("clearTimeout has not been defined")}function i(e){if(a===setTimeout)return setTimeout(e,0);if((a===s||!a)&&setTimeout)return a=setTimeout,setTimeout(e,0);try{return a(e,0)}catch(r){try{return a.call(null,e,0)}catch(r){return a.call(this,e,0)}}}!function(){try{a="function"==typeof setTimeout?setTimeout:s}catch(e){a=s}try{r="function"==typeof clearTimeout?clearTimeout:n}catch(e){r=n}}();var l=[],c=!1,d=-1;function m(){c&&t&&(c=!1,t.length?l=t.concat(l):d=-1,l.length&&x())}function x(){if(!c){var e=i(m);c=!0;for(var a=l.length;a;){for(t=l,l=[];++d<a;)t&&t[d].run();d=-1,a=l.length}t=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===n||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(a){try{return r.call(null,e)}catch(a){return r.call(this,e)}}}(e)}}function h(e,a){this.fun=e,this.array=a}function u(){}o.nextTick=function(e){var a=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)a[r-1]=arguments[r];l.push(new h(e,a)),1!==l.length||c||i(x)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=u,o.addListener=u,o.once=u,o.off=u,o.removeListener=u,o.removeAllListeners=u,o.emit=u,o.prependListener=u,o.prependOnceListener=u,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},r={};function t(e){var o=r[e];if(void 0!==o)return o.exports;var s=r[e]={exports:{}},n=!0;try{a[e](s,s.exports,t),n=!1}finally{n&&delete r[e]}return s.exports}t.ab="//";var o=t(229);e.exports=o}()}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=6284)}),_N_E=e.O()}]);