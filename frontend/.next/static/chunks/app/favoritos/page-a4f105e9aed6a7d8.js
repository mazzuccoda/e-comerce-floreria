(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6417],{9701:function(e,t,r){Promise.resolve().then(r.bind(r,1494))},1494:function(e,t,r){"use strict";r.r(t);var n=r(7437),o=r(2265),s=r(575),a=r(9376);t.default=()=>{let{user:e,loading:t,isAuthenticated:r}=(0,s.a)(),i=(0,a.useRouter)();return(o.useEffect(()=>{t||r||i.push("/")},[r,t,i]),t)?(0,n.jsx)("div",{className:"flex justify-center items-center min-h-[400px]",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-700"})}):r&&e?(0,n.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,n.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Mis Favoritos"}),(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)("div",{className:"w-24 h-24 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,n.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No tienes productos favoritos"}),(0,n.jsx)("p",{className:"text-gray-500 mb-6",children:"Guarda tus productos favoritos para encontrarlos f\xe1cilmente m\xe1s tarde."}),(0,n.jsx)("button",{onClick:()=>i.push("/productos"),className:"bg-green-700 text-white px-6 py-3 rounded-md hover:bg-green-800 transition-colors",children:"Explorar Productos"})]})]})}):null}},575:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return c},a:function(){return u}});var n=r(7437),o=r(2265),s=r(9064),a=r(257);let i=(0,o.createContext)(void 0),u=()=>{let e=(0,o.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},c=e=>{let{children:t}=e,[r,u]=(0,o.useState)(null),[c,l]=(0,o.useState)(null),[d,f]=(0,o.useState)(!0),h=()=>a.env.NEXT_PUBLIC_API_URL||"https://e-comerce-floreria-production.up.railway.app/api",m=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=h(),n=await fetch("".concat(r).concat(e),{credentials:"include",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json",...c&&{Authorization:"Token ".concat(c)},...t.headers},...t});if(!n.ok)throw Error((await n.json().catch(()=>({}))).error||"HTTP error! status: ".concat(n.status));return n.json()};(0,o.useEffect)(()=>{let e=localStorage.getItem("auth_token"),t=localStorage.getItem("auth_user");e&&t&&(l(e),u(JSON.parse(t))),f(!1)},[]);let p=async(e,t)=>{try{f(!0);let r=await m("/usuarios/simple/login/",{method:"POST",body:JSON.stringify({username:e,password:t})});return u(r.user),l(r.token),localStorage.setItem("auth_token",r.token),localStorage.setItem("auth_user",JSON.stringify(r.user)),s.Am.success("\xa1Bienvenido, ".concat(r.user.first_name||r.user.username,"!")),!0}catch(t){let e=t instanceof Error?t.message:"Error desconocido";return s.Am.error("Error al iniciar sesi\xf3n: ".concat(e)),!1}finally{f(!1)}},g=async e=>{try{f(!0);let t=await m("/usuarios/simple/registro/",{method:"POST",body:JSON.stringify(e)});return u(t.user),l(t.token),localStorage.setItem("auth_token",t.token),localStorage.setItem("auth_user",JSON.stringify(t.user)),s.Am.success("\xa1Cuenta creada exitosamente! Bienvenido, ".concat(t.user.first_name||t.user.username,"!")),!0}catch(t){let e=t instanceof Error?t.message:"Error desconocido";return s.Am.error("Error al registrarse: ".concat(e)),!1}finally{f(!1)}},v=async()=>{try{c&&await m("/usuarios/simple/logout/",{method:"POST"})}catch(e){console.error("Error al hacer logout:",e)}finally{u(null),l(null),localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),s.Am.success("Sesi\xf3n cerrada exitosamente")}},y=async e=>{try{f(!0);let t=await m("/usuarios/simple/perfil/",{method:"PUT",body:JSON.stringify(e)});return u(t.user),localStorage.setItem("auth_user",JSON.stringify(t.user)),s.Am.success("Perfil actualizado exitosamente"),!0}catch(t){let e=t instanceof Error?t.message:"Error desconocido";return s.Am.error("Error al actualizar perfil: ".concat(e)),!1}finally{f(!1)}};return(0,n.jsx)(i.Provider,{value:{user:r,token:c,loading:d,login:p,register:g,logout:v,updateProfile:y,isAuthenticated:!!r&&!!c},children:t})}},9376:function(e,t,r){"use strict";var n=r(5475);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},257:function(e,t,r){"use strict";var n,o;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(o=r.g.process)?void 0:o.env)?r.g.process:r(4227)},4227:function(e){!function(){var t={229:function(e){var t,r,n,o=e.exports={};function s(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u=[],c=!1,l=-1;function d(){c&&n&&(c=!1,n.length?u=n.concat(u):l=-1,u.length&&f())}function f(){if(!c){var e=i(d);c=!0;for(var t=u.length;t;){for(n=u,u=[];++l<t;)n&&n[l].run();l=-1,t=u.length}n=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new h(e,t)),1!==u.length||c||i(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var s=r[e]={exports:{}},a=!0;try{t[e](s,s.exports,n),a=!1}finally{a&&delete r[e]}return s.exports}n.ab="//";var o=n(229);e.exports=o}()}},function(e){e.O(0,[9064,2971,2117,1744],function(){return e(e.s=9701)}),_N_E=e.O()}]);