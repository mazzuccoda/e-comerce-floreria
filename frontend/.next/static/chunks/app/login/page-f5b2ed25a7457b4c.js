(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2626],{9578:function(e,r,t){Promise.resolve().then(t.bind(t,6374))},6374:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return c}});var s=t(7437),n=t(2265),a=t(9376),o=t(7648),i=t(575);function c(){let e=(0,a.useRouter)(),{login:r,loading:t}=(0,i.a)(),[c,l]=(0,n.useState)({email:"",password:""}),u=async t=>{t.preventDefault(),await r(c.email,c.password)&&e.push("/")};return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-blue-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-white p-10 rounded-2xl shadow-xl",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"\uD83C\uDF38 Florer\xeda Cristina"}),(0,s.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Inicia sesi\xf3n en tu cuenta"})]}),(0,s.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:u,children:[(0,s.jsxs)("div",{className:"rounded-md shadow-sm space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Correo electr\xf3nico"}),(0,s.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:c.email,onChange:e=>l({...c,email:e.target.value}),className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-green-600 focus:border-green-600 focus:z-10 sm:text-sm",placeholder:"tu@email.com"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contrase\xf1a"}),(0,s.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:c.password,onChange:e=>l({...c,password:e.target.value}),className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-green-600 focus:border-green-600 focus:z-10 sm:text-sm",placeholder:"••••••••"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-green-700 focus:ring-green-600 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Recordarme"})]}),(0,s.jsx)("div",{className:"text-sm",children:(0,s.jsx)(o.default,{href:"/recuperar-password",className:"font-medium text-green-700 hover:text-green-600",children:"\xbfOlvidaste tu contrase\xf1a?"})})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",disabled:t,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-green-700 hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:t?(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Iniciando sesi\xf3n..."]}):"Iniciar sesi\xf3n"})}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["\xbfNo tienes una cuenta?"," ",(0,s.jsx)(o.default,{href:"/registro",className:"font-medium text-green-700 hover:text-green-600",children:"Reg\xedstrate aqu\xed"})]})}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,s.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"O contin\xfaa como invitado"})})]}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)(o.default,{href:"/",className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200",children:"Volver a la tienda"})})]})]})]})})}},575:function(e,r,t){"use strict";t.d(r,{AuthProvider:function(){return l},a:function(){return c}});var s=t(7437),n=t(2265),a=t(9064),o=t(257);let i=(0,n.createContext)(void 0),c=()=>{let e=(0,n.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},l=e=>{let{children:r}=e,[t,c]=(0,n.useState)(null),[l,u]=(0,n.useState)(null),[d,m]=(0,n.useState)(!0),f=()=>o.env.NEXT_PUBLIC_API_URL||"https://e-comerce-floreria-production.up.railway.app/api",h=async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=f(),s=await fetch("".concat(t).concat(e),{credentials:"include",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json",...l&&{Authorization:"Token ".concat(l)},...r.headers},...r});if(!s.ok)throw Error((await s.json().catch(()=>({}))).error||"HTTP error! status: ".concat(s.status));return s.json()};(0,n.useEffect)(()=>{let e=localStorage.getItem("auth_token"),r=localStorage.getItem("auth_user");e&&r&&(u(e),c(JSON.parse(r))),m(!1)},[]);let p=async(e,r)=>{try{m(!0);let t=await h("/usuarios/simple/login/",{method:"POST",body:JSON.stringify({username:e,password:r})});return c(t.user),u(t.token),localStorage.setItem("auth_token",t.token),localStorage.setItem("auth_user",JSON.stringify(t.user)),a.Am.success("\xa1Bienvenido, ".concat(t.user.first_name||t.user.username,"!")),!0}catch(r){let e=r instanceof Error?r.message:"Error desconocido";return a.Am.error("Error al iniciar sesi\xf3n: ".concat(e)),!1}finally{m(!1)}},x=async e=>{try{m(!0);let r=await h("/usuarios/simple/registro/",{method:"POST",body:JSON.stringify(e)});return c(r.user),u(r.token),localStorage.setItem("auth_token",r.token),localStorage.setItem("auth_user",JSON.stringify(r.user)),a.Am.success("\xa1Cuenta creada exitosamente! Bienvenido, ".concat(r.user.first_name||r.user.username,"!")),!0}catch(r){let e=r instanceof Error?r.message:"Error desconocido";return a.Am.error("Error al registrarse: ".concat(e)),!1}finally{m(!1)}},g=async()=>{try{l&&await h("/usuarios/simple/logout/",{method:"POST"})}catch(e){console.error("Error al hacer logout:",e)}finally{c(null),u(null),localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),a.Am.success("Sesi\xf3n cerrada exitosamente")}},y=async e=>{try{m(!0);let r=await h("/usuarios/simple/perfil/",{method:"PUT",body:JSON.stringify(e)});return c(r.user),localStorage.setItem("auth_user",JSON.stringify(r.user)),a.Am.success("Perfil actualizado exitosamente"),!0}catch(r){let e=r instanceof Error?r.message:"Error desconocido";return a.Am.error("Error al actualizar perfil: ".concat(e)),!1}finally{m(!1)}};return(0,s.jsx)(i.Provider,{value:{user:t,token:l,loading:d,login:p,register:x,logout:g,updateProfile:y,isAuthenticated:!!t&&!!l},children:r})}},9376:function(e,r,t){"use strict";var s=t(5475);t.o(s,"useParams")&&t.d(r,{useParams:function(){return s.useParams}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(r,{useSearchParams:function(){return s.useSearchParams}})},257:function(e,r,t){"use strict";var s,n;e.exports=(null==(s=t.g.process)?void 0:s.env)&&"object"==typeof(null==(n=t.g.process)?void 0:n.env)?t.g.process:t(4227)},4227:function(e){!function(){var r={229:function(e){var r,t,s,n=e.exports={};function a(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function i(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{t="function"==typeof clearTimeout?clearTimeout:o}catch(e){t=o}}();var c=[],l=!1,u=-1;function d(){l&&s&&(l=!1,s.length?c=s.concat(c):u=-1,c.length&&m())}function m(){if(!l){var e=i(d);l=!0;for(var r=c.length;r;){for(s=c,c=[];++u<r;)s&&s[u].run();u=-1,r=c.length}s=null,l=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===o||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{t(e)}catch(r){try{return t.call(null,e)}catch(r){return t.call(this,e)}}}(e)}}function f(e,r){this.fun=e,this.array=r}function h(){}n.nextTick=function(e){var r=Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];c.push(new f(e,r)),1!==c.length||l||i(m)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=h,n.addListener=h,n.once=h,n.off=h,n.removeListener=h,n.removeAllListeners=h,n.emit=h,n.prependListener=h,n.prependOnceListener=h,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},t={};function s(e){var n=t[e];if(void 0!==n)return n.exports;var a=t[e]={exports:{}},o=!0;try{r[e](a,a.exports,s),o=!1}finally{o&&delete t[e]}return a.exports}s.ab="//";var n=s(229);e.exports=n}()}},function(e){e.O(0,[9064,7648,2971,2117,1744],function(){return e(e.s=9578)}),_N_E=e.O()}]);