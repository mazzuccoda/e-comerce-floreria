(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9216],{1946:function(e,r,t){Promise.resolve().then(t.bind(t,4211))},4211:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return c}});var a=t(7437),o=t(2265),n=t(9376),s=t(7648),l=t(575),i=t(9064);function c(){let e=(0,n.useRouter)(),{register:r,loading:t}=(0,l.a)(),[c,u]=(0,o.useState)({nombre:"",apellido:"",email:"",telefono:"",password:"",password2:""}),d=async t=>{if(t.preventDefault(),c.password!==c.password2){i.ZP.error("Las contrase\xf1as no coinciden");return}if(c.password.length<8){i.ZP.error("La contrase\xf1a debe tener al menos 8 caracteres");return}await r({username:c.email.split("@")[0],email:c.email,password:c.password,password_confirm:c.password2,first_name:c.nombre,last_name:c.apellido,telefono:c.telefono})&&e.push("/")};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-blue-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-white p-10 rounded-2xl shadow-xl",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"\uD83C\uDF38 Florer\xeda Cristina"}),(0,a.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Crea tu cuenta"})]}),(0,a.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:d,children:[(0,a.jsxs)("div",{className:"rounded-md shadow-sm space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"nombre",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre *"}),(0,a.jsx)("input",{id:"nombre",name:"nombre",type:"text",required:!0,value:c.nombre,onChange:e=>u({...c,nombre:e.target.value}),className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-green-600 focus:border-green-600 sm:text-sm",placeholder:"Juan"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"apellido",className:"block text-sm font-medium text-gray-700 mb-1",children:"Apellido *"}),(0,a.jsx)("input",{id:"apellido",name:"apellido",type:"text",required:!0,value:c.apellido,onChange:e=>u({...c,apellido:e.target.value}),className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-green-600 focus:border-green-600 sm:text-sm",placeholder:"P\xe9rez"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Correo electr\xf3nico *"}),(0,a.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:c.email,onChange:e=>u({...c,email:e.target.value}),className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-green-600 focus:border-green-600 sm:text-sm",placeholder:"tu@email.com"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"telefono",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tel\xe9fono *"}),(0,a.jsx)("input",{id:"telefono",name:"telefono",type:"tel",required:!0,value:c.telefono,onChange:e=>u({...c,telefono:e.target.value}),className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-green-600 focus:border-green-600 sm:text-sm",placeholder:"+54 9 11 1234-5678"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contrase\xf1a *"}),(0,a.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:c.password,onChange:e=>u({...c,password:e.target.value}),className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-green-600 focus:border-green-600 sm:text-sm",placeholder:"M\xednimo 8 caracteres"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password2",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmar contrase\xf1a *"}),(0,a.jsx)("input",{id:"password2",name:"password2",type:"password",autoComplete:"new-password",required:!0,value:c.password2,onChange:e=>u({...c,password2:e.target.value}),className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-green-600 focus:border-green-600 sm:text-sm",placeholder:"Repite tu contrase\xf1a"})]})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",disabled:t,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-green-700 hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:t?(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creando cuenta..."]}):"Crear cuenta"})}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["\xbfYa tienes una cuenta?"," ",(0,a.jsx)(s.default,{href:"/login",className:"font-medium text-green-700 hover:text-green-600",children:"Inicia sesi\xf3n aqu\xed"})]})}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,a.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,a.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,a.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"O contin\xfaa como invitado"})})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(s.default,{href:"/",className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200",children:"Volver a la tienda"})})]})]})]})})}},575:function(e,r,t){"use strict";t.d(r,{AuthProvider:function(){return c},a:function(){return i}});var a=t(7437),o=t(2265),n=t(9064),s=t(257);let l=(0,o.createContext)(void 0),i=()=>{let e=(0,o.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},c=e=>{let{children:r}=e,[t,i]=(0,o.useState)(null),[c,u]=(0,o.useState)(null),[d,m]=(0,o.useState)(!0),p=()=>s.env.NEXT_PUBLIC_API_URL||"https://e-comerce-floreria-production.up.railway.app/api",f=async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=p(),a=await fetch("".concat(t).concat(e),{credentials:"include",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json",...c&&{Authorization:"Token ".concat(c)},...r.headers},...r});if(!a.ok)throw Error((await a.json().catch(()=>({}))).error||"HTTP error! status: ".concat(a.status));return a.json()};(0,o.useEffect)(()=>{let e=localStorage.getItem("auth_token"),r=localStorage.getItem("auth_user");e&&r&&(u(e),i(JSON.parse(r))),m(!1)},[]);let h=async(e,r)=>{try{m(!0);let t=await f("/usuarios/simple/login/",{method:"POST",body:JSON.stringify({username:e,password:r})});return i(t.user),u(t.token),localStorage.setItem("auth_token",t.token),localStorage.setItem("auth_user",JSON.stringify(t.user)),n.Am.success("\xa1Bienvenido, ".concat(t.user.first_name||t.user.username,"!")),!0}catch(r){let e=r instanceof Error?r.message:"Error desconocido";return n.Am.error("Error al iniciar sesi\xf3n: ".concat(e)),!1}finally{m(!1)}},g=async e=>{try{m(!0);let r=await f("/usuarios/simple/registro/",{method:"POST",body:JSON.stringify(e)});return i(r.user),u(r.token),localStorage.setItem("auth_token",r.token),localStorage.setItem("auth_user",JSON.stringify(r.user)),n.Am.success("\xa1Cuenta creada exitosamente! Bienvenido, ".concat(r.user.first_name||r.user.username,"!")),!0}catch(r){let e=r instanceof Error?r.message:"Error desconocido";return n.Am.error("Error al registrarse: ".concat(e)),!1}finally{m(!1)}},x=async()=>{try{c&&await f("/usuarios/simple/logout/",{method:"POST"})}catch(e){console.error("Error al hacer logout:",e)}finally{i(null),u(null),localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),n.Am.success("Sesi\xf3n cerrada exitosamente")}},y=async e=>{try{m(!0);let r=await f("/usuarios/simple/perfil/",{method:"PUT",body:JSON.stringify(e)});return i(r.user),localStorage.setItem("auth_user",JSON.stringify(r.user)),n.Am.success("Perfil actualizado exitosamente"),!0}catch(r){let e=r instanceof Error?r.message:"Error desconocido";return n.Am.error("Error al actualizar perfil: ".concat(e)),!1}finally{m(!1)}};return(0,a.jsx)(l.Provider,{value:{user:t,token:c,loading:d,login:h,register:g,logout:x,updateProfile:y,isAuthenticated:!!t&&!!c},children:r})}},9376:function(e,r,t){"use strict";var a=t(5475);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},257:function(e,r,t){"use strict";var a,o;e.exports=(null==(a=t.g.process)?void 0:a.env)&&"object"==typeof(null==(o=t.g.process)?void 0:o.env)?t.g.process:t(4227)},4227:function(e){!function(){var r={229:function(e){var r,t,a,o=e.exports={};function n(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function l(e){if(r===setTimeout)return setTimeout(e,0);if((r===n||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:n}catch(e){r=n}try{t="function"==typeof clearTimeout?clearTimeout:s}catch(e){t=s}}();var i=[],c=!1,u=-1;function d(){c&&a&&(c=!1,a.length?i=a.concat(i):u=-1,i.length&&m())}function m(){if(!c){var e=l(d);c=!0;for(var r=i.length;r;){for(a=i,i=[];++u<r;)a&&a[u].run();u=-1,r=i.length}a=null,c=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===s||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{t(e)}catch(r){try{return t.call(null,e)}catch(r){return t.call(this,e)}}}(e)}}function p(e,r){this.fun=e,this.array=r}function f(){}o.nextTick=function(e){var r=Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];i.push(new p(e,r)),1!==i.length||c||l(m)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=f,o.addListener=f,o.once=f,o.off=f,o.removeListener=f,o.removeAllListeners=f,o.emit=f,o.prependListener=f,o.prependOnceListener=f,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},t={};function a(e){var o=t[e];if(void 0!==o)return o.exports;var n=t[e]={exports:{}},s=!0;try{r[e](n,n.exports,a),s=!1}finally{s&&delete t[e]}return n.exports}a.ab="//";var o=a(229);e.exports=o}()}},function(e){e.O(0,[9064,7648,2971,2117,1744],function(){return e(e.s=1946)}),_N_E=e.O()}]);