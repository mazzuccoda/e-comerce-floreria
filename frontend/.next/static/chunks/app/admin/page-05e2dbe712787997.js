(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{4610:function(e,r,s){Promise.resolve().then(s.bind(s,6122))},6122:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return n}});var t=s(7437),a=s(2265),o=s(9376);function c(e){let{onProductAdded:r}=e,[s,o]=(0,a.useState)([]),[c,n]=(0,a.useState)([]),[i,d]=(0,a.useState)(!1),[l,m]=(0,a.useState)(""),[x,u]=(0,a.useState)(""),[g,h]=(0,a.useState)({nombre:"",descripcion:"",descripcion_corta:"",precio:"",stock:"",categoria:"",tipo:"",sku:"",is_active:!0,is_featured:!1,porcentaje_descuento:"0"}),p=()=>"http://localhost:8000";(0,a.useEffect)(()=>{(async()=>{try{let[e,r]=await Promise.all([fetch("".concat(p(),"/api/catalogo/categorias/")),fetch("".concat(p(),"/api/catalogo/tipos-flor/"))]);if(e.ok){let r=await e.json();o(r.results||r)}if(r.ok){let e=await r.json();n(e.results||e)}}catch(e){console.error("Error fetching data:",e)}})()},[]);let b=e=>{let{name:r,value:s,type:t}=e.target;if("checkbox"===t){let s=e.target;h(e=>({...e,[r]:s.checked}))}else h(e=>({...e,[r]:s}))},f=()=>{let e=Date.now().toString().slice(-6),r=Math.floor(1e3*Math.random()).toString().padStart(3,"0");return"PROD-".concat(e,"-").concat(r)},j=async e=>{e.preventDefault(),d(!0),m(""),u("");try{let e={...g,precio:parseFloat(g.precio),stock:parseInt(g.stock),categoria:parseInt(g.categoria),tipo:parseInt(g.tipo),porcentaje_descuento:parseFloat(g.porcentaje_descuento),sku:g.sku||f()},s=await fetch("".concat(p(),"/api/catalogo/productos/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(s.ok)u("\xa1Producto agregado exitosamente!"),h({nombre:"",descripcion:"",descripcion_corta:"",precio:"",stock:"",categoria:"",tipo:"",sku:"",is_active:!0,is_featured:!1,porcentaje_descuento:"0"}),r();else{let e=await s.json();m("Error: ".concat(JSON.stringify(e)))}}catch(e){console.error("Error adding product:",e),m("Error al agregar el producto")}finally{d(!1)}};return(0,t.jsx)("div",{className:"bg-white shadow sm:rounded-lg",children:(0,t.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,t.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-6",children:"Agregar Nuevo Producto"}),l&&(0,t.jsx)("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:l}),x&&(0,t.jsx)("div",{className:"mb-4 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded",children:x}),(0,t.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"nombre",className:"block text-sm font-medium text-gray-700",children:"Nombre del Producto *"}),(0,t.jsx)("input",{type:"text",name:"nombre",id:"nombre",required:!0,value:g.nombre,onChange:b,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-600 focus:border-green-600 sm:text-sm",placeholder:"Ej: Ramo de Rosas Rojas"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"sku",className:"block text-sm font-medium text-gray-700",children:"SKU (opcional)"}),(0,t.jsx)("input",{type:"text",name:"sku",id:"sku",value:g.sku,onChange:b,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-600 focus:border-green-600 sm:text-sm",placeholder:"Se generar\xe1 autom\xe1ticamente si se deja vac\xedo"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"precio",className:"block text-sm font-medium text-gray-700",children:"Precio *"}),(0,t.jsx)("input",{type:"number",name:"precio",id:"precio",required:!0,min:"0",step:"0.01",value:g.precio,onChange:b,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-600 focus:border-green-600 sm:text-sm",placeholder:"25000.00"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"stock",className:"block text-sm font-medium text-gray-700",children:"Stock *"}),(0,t.jsx)("input",{type:"number",name:"stock",id:"stock",required:!0,min:"0",value:g.stock,onChange:b,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-600 focus:border-green-600 sm:text-sm",placeholder:"10"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"categoria",className:"block text-sm font-medium text-gray-700",children:"Categor\xeda *"}),(0,t.jsxs)("select",{name:"categoria",id:"categoria",required:!0,value:g.categoria,onChange:b,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-600 focus:border-green-600 sm:text-sm",children:[(0,t.jsx)("option",{value:"",children:"Seleccionar categor\xeda"}),s.map(e=>(0,t.jsx)("option",{value:e.id,children:e.nombre},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"tipo",className:"block text-sm font-medium text-gray-700",children:"Tipo de Flor *"}),(0,t.jsxs)("select",{name:"tipo",id:"tipo",required:!0,value:g.tipo,onChange:b,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-600 focus:border-green-600 sm:text-sm",children:[(0,t.jsx)("option",{value:"",children:"Seleccionar tipo"}),c.map(e=>(0,t.jsx)("option",{value:e.id,children:e.nombre},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"porcentaje_descuento",className:"block text-sm font-medium text-gray-700",children:"Descuento (%)"}),(0,t.jsx)("input",{type:"number",name:"porcentaje_descuento",id:"porcentaje_descuento",min:"0",max:"100",step:"0.01",value:g.porcentaje_descuento,onChange:b,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-600 focus:border-green-600 sm:text-sm",placeholder:"0"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"descripcion_corta",className:"block text-sm font-medium text-gray-700",children:"Descripci\xf3n Corta"}),(0,t.jsx)("input",{type:"text",name:"descripcion_corta",id:"descripcion_corta",value:g.descripcion_corta,onChange:b,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-600 focus:border-green-600 sm:text-sm",placeholder:"Breve descripci\xf3n del producto"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-gray-700",children:"Descripci\xf3n Completa"}),(0,t.jsx)("textarea",{name:"descripcion",id:"descripcion",rows:4,value:g.descripcion,onChange:b,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-600 focus:border-green-600 sm:text-sm",placeholder:"Descripci\xf3n detallada del producto..."})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{id:"is_active",name:"is_active",type:"checkbox",checked:g.is_active,onChange:b,className:"h-4 w-4 text-green-700 focus:ring-green-600 border-gray-300 rounded"}),(0,t.jsx)("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Producto activo"})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{id:"is_featured",name:"is_featured",type:"checkbox",checked:g.is_featured,onChange:b,className:"h-4 w-4 text-green-700 focus:ring-green-600 border-gray-300 rounded"}),(0,t.jsx)("label",{htmlFor:"is_featured",className:"ml-2 block text-sm text-gray-900",children:"Producto destacado"})]})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)("button",{type:"submit",disabled:i,className:"bg-green-700 border border-transparent rounded-md shadow-sm py-2 px-4 inline-flex justify-center text-sm font-medium text-white hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-600 disabled:opacity-50 disabled:cursor-not-allowed",children:i?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Agregando..."]}):"Agregar Producto"})})]})]})})}function n(){let[e,r]=(0,a.useState)([]),[s,n]=(0,a.useState)([]),[i,d]=(0,a.useState)("products"),[l,m]=(0,a.useState)(!0),[x,u]=(0,a.useState)(""),g=(0,o.useRouter)(),h=()=>"http://localhost:8000",p=async()=>{try{let e=await fetch("".concat(h(),"/api/catalogo/productos/"));if(e.ok){let s=await e.json();r(s.results||s)}}catch(e){console.error("Error fetching products:",e),u("Error cargando productos")}},b=async()=>{try{let e=await fetch("".concat(h(),"/api/catalogo/categorias/"));if(e.ok){let r=await e.json();n(r.results||r)}}catch(e){console.error("Error fetching categories:",e),u("Error cargando categor\xedas")}};(0,a.useEffect)(()=>{(async()=>{m(!0),await Promise.all([p(),b()]),m(!1)})()},[]);let f=async(e,r)=>{try{(await fetch("".concat(h(),"/api/catalogo/productos/").concat(e,"/"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_active:!r})})).ok?await p():u("Error actualizando producto")}catch(e){console.error("Error updating product:",e),u("Error actualizando producto")}};return l?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-700 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Cargando dashboard..."})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\uD83C\uDF38 Admin - Florer\xeda Cristina"})}),(0,t.jsx)("button",{onClick:()=>g.push("/"),className:"bg-green-700 text-white px-4 py-2 rounded-lg hover:bg-green-800 transition-colors",children:"Ver Tienda"})]})})}),(0,t.jsx)("div",{className:"bg-white border-b",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("nav",{className:"flex space-x-8",children:[(0,t.jsxs)("button",{onClick:()=>d("products"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("products"===i?"border-green-600 text-green-700":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["Productos (",e.length,")"]}),(0,t.jsxs)("button",{onClick:()=>d("categories"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("categories"===i?"border-green-600 text-green-700":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["Categor\xedas (",s.length,")"]}),(0,t.jsx)("button",{onClick:()=>d("add-product"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("add-product"===i?"border-green-600 text-green-700":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"➕ Agregar Producto"})]})})}),(0,t.jsxs)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:[x&&(0,t.jsx)("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:x}),"products"===i&&(0,t.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[(0,t.jsxs)("div",{className:"px-4 py-5 sm:px-6",children:[(0,t.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Gesti\xf3n de Productos"}),(0,t.jsx)("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Lista de todos los productos en el cat\xe1logo"})]}),(0,t.jsx)("ul",{className:"divide-y divide-gray-200",children:e.map(e=>{var r;return(0,t.jsx)("li",{className:"px-4 py-4 sm:px-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"h-10 w-10 bg-green-100 rounded-full flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-green-700 font-medium",children:e.nombre.charAt(0)})})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.nombre}),e.is_featured&&(0,t.jsx)("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Destacado"})]}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["SKU: ",e.sku," | Categor\xeda: ",null===(r=e.categoria)||void 0===r?void 0:r.nombre," | Stock: ",e.stock]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("span",{className:"text-lg font-semibold text-green-600",children:["$",parseFloat(e.precio).toLocaleString()]}),(0,t.jsx)("button",{onClick:()=>f(e.id,e.is_active),className:"px-3 py-1 rounded-full text-xs font-medium ".concat(e.is_active?"bg-green-100 text-green-800 hover:bg-green-200":"bg-red-100 text-red-800 hover:bg-red-200"),children:e.is_active?"Activo":"Inactivo"})]})]})},e.id)})})]}),"categories"===i&&(0,t.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[(0,t.jsxs)("div",{className:"px-4 py-5 sm:px-6",children:[(0,t.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Gesti\xf3n de Categor\xedas"}),(0,t.jsx)("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Lista de todas las categor\xedas disponibles"})]}),(0,t.jsx)("ul",{className:"divide-y divide-gray-200",children:s.map(e=>(0,t.jsx)("li",{className:"px-4 py-4 sm:px-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"h-10 w-10 bg-purple-100 rounded-full flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-purple-600 font-medium",children:e.nombre.charAt(0)})})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.nombre}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["ID: ",e.id]})]})]}),(0,t.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Activa":"Inactiva"})]})},e.id))})]}),"add-product"===i&&(0,t.jsx)(c,{onProductAdded:p})]})]})}},9376:function(e,r,s){"use strict";var t=s(5475);s.o(t,"useParams")&&s.d(r,{useParams:function(){return t.useParams}}),s.o(t,"useRouter")&&s.d(r,{useRouter:function(){return t.useRouter}}),s.o(t,"useSearchParams")&&s.d(r,{useSearchParams:function(){return t.useSearchParams}})}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=4610)}),_N_E=e.O()}]);