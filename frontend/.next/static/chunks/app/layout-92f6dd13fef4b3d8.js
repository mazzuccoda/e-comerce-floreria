(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{8235:function(e,t,r){Promise.resolve().then(r.bind(r,3726)),Promise.resolve().then(r.bind(r,92)),Promise.resolve().then(r.t.bind(r,7960,23)),Promise.resolve().then(r.bind(r,575)),Promise.resolve().then(r.bind(r,4523)),Promise.resolve().then(r.t.bind(r,911,23)),Promise.resolve().then(r.bind(r,9064))},3726:function(e,t,r){"use strict";var a=r(7437),o=r(7648);t.default=()=>(0,a.jsx)("footer",{className:"bg-gray-800 text-white mt-12",children:(0,a.jsxs)("div",{className:"container mx-auto px-6 py-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,a.jsx)("div",{children:(0,a.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Florer\xeda Cristina"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Enlaces R\xe1pidos"}),(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:(0,a.jsx)(o.default,{href:"/",className:"text-gray-400 hover:text-white transition-colors",children:"Inicio"})}),(0,a.jsx)("li",{children:(0,a.jsx)(o.default,{href:"/catalogo",className:"text-gray-400 hover:text-white transition-colors",children:"Cat\xe1logo"})}),(0,a.jsx)("li",{children:(0,a.jsx)(o.default,{href:"/contacto",className:"text-gray-400 hover:text-white transition-colors",children:"Contacto"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Contacto"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Direcci\xf3n: Solano Vera 480, Yerba Buena Tucum\xe1n"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Email: eleososatuc@gmail.com"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Tel: 3814778577"})]})]}),(0,a.jsx)("div",{className:"border-t border-gray-700 mt-8 pt-6 text-center",children:(0,a.jsxs)("p",{className:"text-gray-500",children:["\xa9 ",new Date().getFullYear()," Florer\xeda Cristina. Todos los derechos reservados."]})})]})})},92:function(e,t,r){"use strict";r.d(t,{default:function(){return d}});var a=r(7437),o=r(7648),n=r(4523),s=r(575),i=r(2265),c=r(9827),l=r.n(c),u=r(257);function d(){var e;let{cart:t}=(0,n.u)(),{user:r,logout:c,isAuthenticated:d}=(0,s.a)(),[m,h]=(0,i.useState)(!1),[f,g]=(0,i.useState)(!1),[p,y]=(0,i.useState)(!1),[v,_]=(0,i.useState)(!1),[x,b]=(0,i.useState)([]),[N,w]=(0,i.useState)([]);return(0,i.useEffect)(()=>{let e=u.env.NEXT_PUBLIC_API_URL||"https://e-comerce-floreria-production.up.railway.app/api";console.log("\uD83C\uDF38 Navbar: Cargando tipos de flor y ocasiones desde:",e),fetch("".concat(e,"/catalogo/tipos-flor/")).then(e=>e.json()).then(e=>{console.log("✅ Tipos de flor cargados:",e.length),b(e)}).catch(e=>console.error("❌ Error cargando tipos de flor:",e)),fetch("".concat(e,"/catalogo/ocasiones/")).then(e=>e.json()).then(e=>{console.log("✅ Ocasiones cargadas:",e.length),w(e)}).catch(e=>console.error("❌ Error cargando ocasiones:",e))},[]),(0,i.useEffect)(()=>{h(!0)},[]),(0,a.jsx)("nav",{className:"navbar",children:(0,a.jsxs)("div",{className:"navbar-container",children:[(0,a.jsx)(o.default,{href:"/",className:"navbar-logo",children:(0,a.jsx)("img",{src:"https://res.cloudinary.com/dmxc6odsi/image/upload/v1760465112/Logo_Crsitina_t6ofnz.png",alt:"Florer\xeda Cristina",className:"logo-image"})}),(0,a.jsxs)("ul",{className:"navbar-nav",children:[(0,a.jsxs)("li",{className:l().dropdown,children:[(0,a.jsx)("span",{className:l().dropdownButton,children:"Tipo de flor"}),(0,a.jsx)("div",{className:l().dropdownContent,children:x.length>0?x.map(e=>(0,a.jsx)(o.default,{href:"/productos?tipo_flor=".concat(e.id),className:l().dropdownLink,children:e.nombre},e.id)):(0,a.jsx)("span",{className:l().dropdownLink,children:"Cargando..."})})]}),(0,a.jsxs)("li",{className:l().dropdown,children:[(0,a.jsx)("span",{className:l().dropdownButton,children:"Ocasiones"}),(0,a.jsx)("div",{className:l().dropdownContent,children:N.length>0?N.map(e=>(0,a.jsx)(o.default,{href:"/productos?ocasion=".concat(e.id),className:l().dropdownLink,children:e.nombre},e.id)):(0,a.jsx)("span",{className:l().dropdownLink,children:"Cargando..."})})]}),(0,a.jsx)("li",{className:"navbar-item",children:(0,a.jsx)(o.default,{href:"/ayuda",className:"navbar-link",children:"Ayuda"})}),(0,a.jsx)("li",{className:"navbar-item",children:(0,a.jsx)(o.default,{href:"/contacto",className:"navbar-link",children:"Contacto"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",style:{position:"relative",zIndex:100},children:[m&&d&&r?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>g(!f),className:"text-gray-700 hover:text-green-700 font-medium transition-colors flex items-center gap-2",children:["\uD83D\uDC64 ",r.first_name||r.username,(0,a.jsx)("span",{className:"text-xs",children:"▼"})]}),f&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 border border-gray-200",style:{zIndex:9999},children:[(0,a.jsx)(o.default,{href:"/perfil",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>g(!1),children:"Mi Perfil"}),(0,a.jsx)(o.default,{href:"/mis-pedidos",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>g(!1),children:"Mis Pedidos"}),(0,a.jsx)("button",{onClick:()=>{c(),g(!1)},className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Cerrar Sesi\xf3n"})]})]}):(0,a.jsx)(o.default,{href:"/login",className:"text-gray-700 hover:text-green-700 font-medium transition-colors",children:"\uD83D\uDC64 Iniciar sesi\xf3n"}),(0,a.jsxs)(o.default,{href:"/carrito",className:"cart-button",suppressHydrationWarning:!0,children:["\uD83D\uDED2 Carrito ",(0,a.jsx)("span",{className:"cart-count",suppressHydrationWarning:!0,children:m&&(null==t?void 0:null===(e=t.items)||void 0===e?void 0:e.length)||0})]})]})]})})}},575:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return l},a:function(){return c}});var a=r(7437),o=r(2265),n=r(9064),s=r(257);let i=(0,o.createContext)(void 0),c=()=>{let e=(0,o.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},l=e=>{let{children:t}=e,[r,c]=(0,o.useState)(null),[l,u]=(0,o.useState)(null),[d,m]=(0,o.useState)(!0),h=()=>s.env.NEXT_PUBLIC_API_URL||"https://e-comerce-floreria-production.up.railway.app/api",f=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=h(),a=await fetch("".concat(r).concat(e),{credentials:"include",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json",...l&&{Authorization:"Token ".concat(l)},...t.headers},...t});if(!a.ok)throw Error((await a.json().catch(()=>({}))).error||"HTTP error! status: ".concat(a.status));return a.json()};(0,o.useEffect)(()=>{let e=localStorage.getItem("auth_token"),t=localStorage.getItem("auth_user");e&&t&&(u(e),c(JSON.parse(t))),m(!1)},[]);let g=async(e,t)=>{try{m(!0);let r=await f("/usuarios/simple/login/",{method:"POST",body:JSON.stringify({username:e,password:t})});return c(r.user),u(r.token),localStorage.setItem("auth_token",r.token),localStorage.setItem("auth_user",JSON.stringify(r.user)),n.Am.success("\xa1Bienvenido, ".concat(r.user.first_name||r.user.username,"!")),!0}catch(t){let e=t instanceof Error?t.message:"Error desconocido";return n.Am.error("Error al iniciar sesi\xf3n: ".concat(e)),!1}finally{m(!1)}},p=async e=>{try{m(!0);let t=await f("/usuarios/simple/registro/",{method:"POST",body:JSON.stringify(e)});return c(t.user),u(t.token),localStorage.setItem("auth_token",t.token),localStorage.setItem("auth_user",JSON.stringify(t.user)),n.Am.success("\xa1Cuenta creada exitosamente! Bienvenido, ".concat(t.user.first_name||t.user.username,"!")),!0}catch(t){let e=t instanceof Error?t.message:"Error desconocido";return n.Am.error("Error al registrarse: ".concat(e)),!1}finally{m(!1)}},y=async()=>{try{l&&await f("/usuarios/simple/logout/",{method:"POST"})}catch(e){console.error("Error al hacer logout:",e)}finally{c(null),u(null),localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),n.Am.success("Sesi\xf3n cerrada exitosamente")}},v=async e=>{try{m(!0);let t=await f("/usuarios/simple/perfil/",{method:"PUT",body:JSON.stringify(e)});return c(t.user),localStorage.setItem("auth_user",JSON.stringify(t.user)),n.Am.success("Perfil actualizado exitosamente"),!0}catch(t){let e=t instanceof Error?t.message:"Error desconocido";return n.Am.error("Error al actualizar perfil: ".concat(e)),!1}finally{m(!1)}};return(0,a.jsx)(i.Provider,{value:{user:r,token:l,loading:d,login:g,register:p,logout:y,updateProfile:v,isAuthenticated:!!r&&!!l},children:t})}},4523:function(e,t,r){"use strict";r.d(t,{CartProviderRobust:function(){return l},u:function(){return u}});var a=r(7437),o=r(2265),n=r(9064);let s={baseUrl:r(257).env.NEXT_PUBLIC_API_URL||"https://e-comerce-floreria-production.up.railway.app/api",timeout:1e4,retryAttempts:3,retryDelay:1e3};class i{static getInstance(){return i.instance||(i.instance=new i),i.instance}async delay(e){return new Promise(t=>setTimeout(t,e))}generateRequestKey(e,t){return"".concat(e,"-").concat(JSON.stringify(t))}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e;if(r.startsWith("http://")||r.startsWith("https://"));else if(r.startsWith("/api/"))r="".concat(s.baseUrl).concat(r.replace("/api",""));else{let e=r.replace(/^\/+/,"");r="".concat(s.baseUrl,"/").concat(e)}let a=r,o=this.generateRequestKey(a,t);if(this.requestQueue.has(o))return console.log("\uD83D\uDD04 Reusing existing request for ".concat(e)),this.requestQueue.get(o);let n=this.executeRequest(a,t);this.requestQueue.set(o,n);try{return await n}finally{this.requestQueue.delete(o)}}async executeRequest(e,t){let r;for(let a=1;a<=s.retryAttempts;a++){let o=new AbortController,n=setTimeout(()=>{console.log("⏰ Request timeout after ".concat(s.timeout,"ms")),o.abort()},s.timeout);try{console.log("\uD83C\uDF10 API Request (attempt ".concat(a,"): ").concat(e));let r=(t.method||"GET").toUpperCase(),s={Accept:"application/json"};"GET"===r||t.headers&&"Content-Type"in t.headers||(s["Content-Type"]="application/json");let i={...t,method:r,signal:o.signal,credentials:"include",headers:{...s,...t.headers||{}}},c=await fetch(e,i);if(clearTimeout(n),console.log("\uD83D\uDCE1 Response received: ".concat(c.status," ").concat(c.statusText)),!c.ok){let e="HTTP error! status: ".concat(c.status),t=c.clone();try{let t=await c.json();t&&"object"==typeof t&&(e=t.message||t.error||JSON.stringify(t))}catch(r){try{let r=await t.text();r&&(e=r)}catch(e){}}let r=Error(e);throw r.status=c.status,r}try{let t=await c.json();return console.log("✅ API Success: ".concat(e),t),t}catch(e){throw console.error("❌ Error parsing JSON response:",e),Error("Invalid JSON response from server")}}catch(t){if(r=t,console.error("❌ API Error (attempt ".concat(a,"): ").concat(e),t.message),("AbortError"===t.name||t.message.includes("fetch"))&&console.log("\uD83D\uDD04 Network/timeout error, will retry..."),a<s.retryAttempts){let e=s.retryDelay*a;console.log("⏳ Retrying in ".concat(e,"ms...")),await this.delay(e)}}}throw r||Error("All retry attempts failed")}constructor(){this.requestQueue=new Map}}let c=(0,o.createContext)(void 0),l=e=>{let{children:t}=e,r=()=>{try{let e=localStorage.getItem("cart_data");if(e){let t=JSON.parse(e);return console.log("✅ Carrito cargado desde localStorage:",t),t}}catch(e){console.error("❌ Error cargando carrito:",e)}return{items:[],total_price:0,total_items:0,is_empty:!0}},[s,l]=(0,o.useState)(()=>r()),[u,d]=(0,o.useState)(!1),[m,h]=(0,o.useState)(null),f=(0,o.useRef)(i.getInstance()),g=(0,o.useRef)(!0);(0,o.useRef)(0);let p=(0,o.useRef)(!1),y=(0,o.useCallback)(e=>{if(g.current){console.log("\uD83D\uDD04 Updating cart state:",e),l(e),h(null);try{localStorage.setItem("cart_data",JSON.stringify(e)),sessionStorage.setItem("cart_data",JSON.stringify(e)),console.log("\uD83D\uDCBE Carrito guardado en localStorage y sessionStorage")}catch(e){console.error("❌ Error guardando carrito:",e)}}},[]),v=(0,o.useCallback)(e=>{g.current&&d(e)},[]),_=(0,o.useCallback)(e=>{g.current&&h(e)},[]),x=(0,o.useCallback)(async()=>{if(p.current){console.log("\uD83D\uDD04 RefreshCart already in progress, skipping...");return}p.current=!0;try{v(!0),_(null),console.log("\uD83D\uDD04 Starting robust cart refresh...");let e=Date.now(),t=await f.current.request("/carrito/simple/?t=".concat(e),{method:"GET"});if(t&&"object"==typeof t){let e={items:Array.isArray(t.items)?t.items:[],total_price:parseFloat(t.total_price)||0,total_items:parseInt(t.total_items)||0,is_empty:!!t.is_empty};y(e),console.log("✅ Cart refreshed successfully:",e)}else throw Error("Invalid data structure received from server")}catch(e){console.error("❌ Cart refresh failed:",e),_("Connection failed: ".concat(e.message)),y({items:[],total_price:0,total_items:0,is_empty:!0})}finally{v(!1),p.current=!1}},[y,v,_]),b=(0,o.useCallback)(async()=>{console.log("\uD83D\uDD04 Retrying connection..."),await x()},[x]),N=(0,o.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;try{v(!0),console.log("\uD83D\uDED2 Adding to cart:",{product:e.nombre,quantity:t});let r=await f.current.request("/carrito/simple/add/",{method:"POST",body:JSON.stringify({product_id:e.id,quantity:t})});(null==r?void 0:r.cart)?(y(r.cart),n.ZP.success("".concat(e.nombre," agregado al carrito"))):await x()}catch(e){console.error("❌ Add to cart failed:",e),n.ZP.error(e.message||"Error al agregar producto"),_(e.message)}finally{v(!1)}},[x,y,v,_]),w=(0,o.useCallback)(async e=>{try{v(!0),console.log("\uD83D\uDDD1️ Removing from cart:",e),await f.current.request("/carrito/remove/",{method:"DELETE",body:JSON.stringify({product_id:e})}),await x(),n.ZP.success("Producto eliminado del carrito")}catch(e){console.error("❌ Remove from cart failed:",e),n.ZP.error(e.message||"Error al eliminar producto"),_(e.message)}finally{v(!1)}},[x,v,_]),D=(0,o.useCallback)(async(e,t)=>{try{v(!0),console.log("\uD83D\uDCDD Updating quantity:",{productId:e,newQuantity:t}),await f.current.request("/carrito/update/",{method:"PUT",body:JSON.stringify({product_id:e,quantity:t})}),await x(),n.ZP.success("Cantidad actualizada")}catch(e){console.error("❌ Update quantity failed:",e),n.ZP.error(e.message||"Error al actualizar cantidad"),_(e.message)}finally{v(!1)}},[x,v,_]),C=(0,o.useCallback)(async()=>{try{v(!0),console.log("\uD83E\uDDF9 Clearing cart..."),await f.current.request("/carrito/clear/",{method:"DELETE"}),y({items:[],total_price:0,total_items:0,is_empty:!0}),n.ZP.success("Carrito limpiado")}catch(e){console.error("❌ Clear cart failed:",e),n.ZP.error(e.message||"Error al limpiar carrito"),_(e.message)}finally{v(!1)}},[y,v,_]);return(0,o.useEffect)(()=>(console.log("\uD83D\uDE80 CartProviderRobust mounted, starting initial load..."),x(),()=>{g.current=!1}),[]),(0,a.jsx)(c.Provider,{value:{cart:s,loading:u,error:m,addToCart:N,removeFromCart:w,updateQuantity:D,clearCart:C,refreshCart:x,retryConnection:b},children:t})},u=()=>{let e=(0,o.useContext)(c);if(void 0===e)throw Error("useCartRobust must be used within a CartProviderRobust");return e}},257:function(e,t,r){"use strict";var a,o;e.exports=(null==(a=r.g.process)?void 0:a.env)&&"object"==typeof(null==(o=r.g.process)?void 0:o.env)?r.g.process:r(4227)},4227:function(e){!function(){var t={229:function(e){var t,r,a,o=e.exports={};function n(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:n}catch(e){t=n}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var c=[],l=!1,u=-1;function d(){l&&a&&(l=!1,a.length?c=a.concat(c):u=-1,c.length&&m())}function m(){if(!l){var e=i(d);l=!0;for(var t=c.length;t;){for(a=c,c=[];++u<t;)a&&a[u].run();u=-1,t=c.length}a=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function f(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new h(e,t)),1!==c.length||l||i(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=f,o.addListener=f,o.once=f,o.off=f,o.removeListener=f,o.removeAllListeners=f,o.emit=f,o.prependListener=f,o.prependOnceListener=f,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},r={};function a(e){var o=r[e];if(void 0!==o)return o.exports;var n=r[e]={exports:{}},s=!0;try{t[e](n,n.exports,a),s=!1}finally{s&&delete r[e]}return n.exports}a.ab="//";var o=a(229);e.exports=o}()},7960:function(){},9827:function(e){e.exports={navbar:"Navbar_navbar__XlgWY",container:"Navbar_container__x_wnu",logo:"Navbar_logo__ycYQk","gentle-float":"Navbar_gentle-float__k6s7e",navLinks:"Navbar_navLinks__5FCHq",navLink:"Navbar_navLink__NoUWm",navActions:"Navbar_navActions__vfR_h",cartButton:"Navbar_cartButton__2iiro",dropdown:"Navbar_dropdown__T0S7H",dropdownButton:"Navbar_dropdownButton__4NTeA",dropdownContent:"Navbar_dropdownContent__AGk_Y",dropdownLink:"Navbar_dropdownLink__Gt_Ln",admin:"Navbar_admin__H7ZrY",authSection:"Navbar_authSection__qRTQm",authButton:"Navbar_authButton__CLZO6",loginButton:"Navbar_loginButton__FT71R",registerButton:"Navbar_registerButton__085Ig",cartSection:"Navbar_cartSection__mn6bp",cartLink:"Navbar_cartLink__s44sJ",navbarContainer:"Navbar_navbarContainer__PU731",scrolled:"Navbar_scrolled__r46p9",pulse:"Navbar_pulse__a_VlE"}},911:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3"}}},function(e){e.O(0,[284,9064,7648,2971,2117,1744],function(){return e(e.s=8235)}),_N_E=e.O()}]);