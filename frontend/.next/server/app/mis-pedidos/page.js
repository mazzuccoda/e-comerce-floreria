(()=>{var e={};e.id=340,e.ids=[340],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3714:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>l}),t(2647),t(9293),t(5866);var r=t(3191),a=t(8716),i=t(7922),n=t.n(i),o=t(5231),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);t.d(s,d);let l=["",{children:["mis-pedidos",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2647)),"C:\\Users\\dmazzucco\\OneDrive - SA San Miguel A.G.I.C.I. y F\\Escritorio\\Daniel Mazuzzcco Personal\\e-comerce\\frontend\\app\\mis-pedidos\\page.tsx"]}]},{metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}]},{layout:[()=>Promise.resolve().then(t.bind(t,9293)),"C:\\Users\\dmazzucco\\OneDrive - SA San Miguel A.G.I.C.I. y F\\Escritorio\\Daniel Mazuzzcco Personal\\e-comerce\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}],c=["C:\\Users\\dmazzucco\\OneDrive - SA San Miguel A.G.I.C.I. y F\\Escritorio\\Daniel Mazuzzcco Personal\\e-comerce\\frontend\\app\\mis-pedidos\\page.tsx"],m="/mis-pedidos/page",u={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/mis-pedidos/page",pathname:"/mis-pedidos",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},4718:(e,s,t)=>{Promise.resolve().then(t.bind(t,2728))},2728:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var r=t(326),a=t(7577),i=t(732),n=t(5047);let o=()=>{let{user:e,token:s,loading:t,isAuthenticated:o}=(0,i.a)(),d=(0,n.useRouter)(),[l,c]=(0,a.useState)([]),[m,u]=(0,a.useState)(!0),[p,x]=(0,a.useState)(null);return((0,a.useEffect)(()=>{t||o||d.push("/login")},[o,t,d]),(0,a.useEffect)(()=>{let e=async()=>{if(s)try{u(!0);let e=process.env.NEXT_PUBLIC_API_URL||"https://e-comerce-floreria-production.up.railway.app/api",t=await fetch(`${e}/pedidos/simple/mis-pedidos/`,{headers:{Authorization:`Token ${s}`,Accept:"application/json"},credentials:"include"});if(t.ok){let e=await t.json();c(e.pedidos||[])}else{let e=await t.json();x(e.error||"Error al cargar pedidos")}}catch(e){console.error("Error cargando pedidos:",e),x("Error de conexi\xf3n")}finally{u(!1)}};o&&s&&e()},[o,s]),t||m)?r.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-700"})}):o&&e?r.jsx("div",{className:"max-w-4xl mx-auto",children:(0,r.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Mis Pedidos"}),p&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4",children:p}),0===l.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"A\xfan no tienes pedidos"}),r.jsx("p",{className:"text-gray-500 mb-6",children:"Cuando realices tu primer pedido, aparecer\xe1 aqu\xed con toda la informaci\xf3n de seguimiento."}),r.jsx("button",{onClick:()=>d.push("/productos"),className:"bg-green-700 text-white px-6 py-3 rounded-md hover:bg-green-800 transition-colors",children:"Explorar Productos"})]}):r.jsx("div",{className:"space-y-4",children:l.map(e=>(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Pedido #",e.numero_pedido]}),r.jsx("p",{className:"text-sm text-gray-500",children:new Date(e.creado).toLocaleDateString("es-AR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),r.jsx("div",{className:"text-right",children:r.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${"pendiente"===e.estado?"bg-yellow-100 text-yellow-800":"confirmado"===e.estado?"bg-blue-100 text-blue-800":"en_camino"===e.estado?"bg-purple-100 text-purple-800":"entregado"===e.estado?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e.estado.replace("_"," ").toUpperCase()})})]}),(0,r.jsxs)("div",{className:"border-t pt-4",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[r.jsx("span",{className:"text-gray-600",children:"M\xe9todo de pago:"}),r.jsx("span",{className:"font-medium",children:e.medio_pago_display||e.medio_pago})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[r.jsx("span",{className:"text-gray-600",children:"Productos:"}),(0,r.jsxs)("span",{className:"font-medium",children:[e.items?.length||0," items"]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-lg font-bold mt-4 pt-4 border-t",children:[r.jsx("span",{children:"Total:"}),(0,r.jsxs)("span",{className:"text-green-700",children:["$",e.total]})]})]}),r.jsx("button",{onClick:()=>d.push(`/pedido/${e.id}`),className:"mt-4 w-full bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-2 px-4 rounded transition-colors",children:"Ver Detalles"})]},e.id))})]})}):null}},5047:(e,s,t)=>{"use strict";var r=t(7389);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},2647:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`C:\Users\dmazzucco\OneDrive - SA San Miguel A.G.I.C.I. y F\Escritorio\Daniel Mazuzzcco Personal\e-comerce\frontend\app\mis-pedidos\page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[8948,2063,6744],()=>t(3714));module.exports=r})();