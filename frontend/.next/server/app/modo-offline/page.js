(()=>{var e={};e.id=6117,e.ids=[6117],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5131:(e,r,o)=>{"use strict";o.r(r),o.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>p,tree:()=>c}),o(907),o(9293),o(5866);var s=o(3191),t=o(8716),a=o(7922),n=o.n(a),i=o(5231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);o.d(r,l);let c=["",{children:["modo-offline",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(o.bind(o,907)),"C:\\Users\\dmazzucco\\OneDrive - SA San Miguel A.G.I.C.I. y F\\Escritorio\\Daniel Mazuzzcco Personal\\e-comerce\\frontend\\app\\modo-offline\\page.tsx"]}]},{metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}]},{layout:[()=>Promise.resolve().then(o.bind(o,9293)),"C:\\Users\\dmazzucco\\OneDrive - SA San Miguel A.G.I.C.I. y F\\Escritorio\\Daniel Mazuzzcco Personal\\e-comerce\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(o.t.bind(o,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}],d=["C:\\Users\\dmazzucco\\OneDrive - SA San Miguel A.G.I.C.I. y F\\Escritorio\\Daniel Mazuzzcco Personal\\e-comerce\\frontend\\app\\modo-offline\\page.tsx"],m="/modo-offline/page",u={require:o,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/modo-offline/page",pathname:"/modo-offline",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5362:(e,r,o)=>{Promise.resolve().then(o.bind(o,6806))},6806:(e,r,o)=>{"use strict";o.r(r),o.d(r,{default:()=>p});var s=o(326),t=o(7577),a=o(381),n=o(5047);let i="floreria_cristina_cart",l=e=>{try{localStorage.setItem(i,JSON.stringify(e)),console.log("\uD83D\uDCBE Carrito guardado en localStorage")}catch(e){console.error("❌ Error guardando carrito en localStorage:",e)}},c=()=>{try{console.log("\uD83D\uDD0D Intentando cargar carrito desde localStorage");let e=localStorage.getItem(i);if(!e)return console.log("⚠️ No se encontr\xf3 carrito en localStorage"),null;let r=JSON.parse(e);return console.log("✅ Carrito cargado desde localStorage:",r),r}catch(e){return console.error("❌ Error cargando carrito desde localStorage:",e),null}},d=(e,r=1)=>{let o=c()||{items:[],total_price:0,total_items:0,is_empty:!0},s=o.items.findIndex(r=>r.producto.id===e.id);if(s>=0)o.items[s].quantity+=r,o.items[s].total_price=o.items[s].price*o.items[s].quantity;else{let s=parseFloat(e.precio_descuento||e.precio);o.items.push({producto:e,quantity:r,price:s,total_price:s*r,item_id:Date.now()})}return o.total_items=o.items.reduce((e,r)=>e+r.quantity,0),o.total_price=o.items.reduce((e,r)=>e+r.total_price,0),o.is_empty=0===o.items.length,l(o),o};function m({product:e}){let r=(0,n.useRouter)(),[o,i]=(0,t.useState)(!1),l=(0,t.useMemo)(()=>{let r="/images/no-image.jpg";try{let o=e.imagen_principal;if(!o||"null"===o||"undefined"===o)return console.log("Sin imagen para producto en modo offline:",e.nombre),r;if(o.includes("/media/")||o.includes("web:8000")||o.includes("localhost:8000"))return console.log("Modo offline: Usando imagen fallback para producto:",e.nombre),r;return(o.startsWith("http://")||o.startsWith("https://"))&&o.includes("placeholder.com"),r}catch(e){return console.error("Error procesando URL de imagen en modo offline:",e),r}},[e.imagen_principal,e.nombre]),c=async r=>{if(r.preventDefault(),r.stopPropagation(),o||e.stock<=0){e.stock<=0?a.ZP.error("Producto sin stock disponible"):o&&a.ZP.error("Ya se est\xe1 procesando tu solicitud");return}if(!e.id){a.ZP.error("Error con el producto seleccionado");return}i(!0);try{d(e,1),a.ZP.success(`${e.nombre} agregado al carrito local`),console.log("\uD83D\uDED2 Producto agregado al carrito local:",e.nombre)}catch(e){console.error("Error adding to local cart:",e),a.ZP.error(`Error: ${e.message||"No se pudo agregar al carrito"}`)}finally{i(!1)}};return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 overflow-hidden border border-gray-200",children:[e.envio_gratis&&s.jsx("div",{className:"absolute top-2 left-2 bg-green-600 text-white text-xs px-2 py-1 rounded-md font-semibold z-10",children:"ENV\xcdO GRATIS"}),(0,s.jsxs)("div",{className:"relative cursor-pointer h-48 overflow-hidden bg-gray-50",onClick:()=>r.push(`/productos/${e.slug}`),children:[s.jsx("img",{src:l,alt:e.nombre||"Producto offline",className:"w-full h-full object-contain",onError:r=>{let o=r.target;console.log("Error cargando imagen en modo offline, usando fallback para:",e.nombre),o.src="/images/no-image.jpg",o.classList.add("p-4")},loading:"lazy"},`offline-product-${e.id}-img`),e.porcentaje_descuento&&(0,s.jsxs)("div",{className:"absolute top-2 right-2 bg-red-600 text-white text-xs px-2 py-1 rounded-md font-semibold",children:[e.porcentaje_descuento,"% OFF"]})]}),(0,s.jsxs)("div",{className:"p-4",children:[s.jsx("div",{className:"flex justify-between items-start mb-1",children:s.jsx("h2",{className:"text-lg font-semibold line-clamp-2",title:e.nombre,children:e.nombre})}),s.jsx("div",{className:"text-sm text-gray-500 mb-2 line-clamp-1",title:e.descripcion_corta,children:e.descripcion_corta||e.descripcion.substring(0,50)}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,s.jsxs)("div",{className:"text-lg font-bold",children:["$",e.precio_final,e.precio_descuento&&(0,s.jsxs)("span",{className:"text-sm text-gray-400 line-through ml-2",children:["$",e.precio]})]}),s.jsx("button",{onClick:c,disabled:o||e.stock<=0,className:`px-2 py-1 rounded text-white text-sm font-semibold transition 
              ${e.stock<=0?"bg-gray-400 cursor-not-allowed":o?"bg-yellow-500 cursor-wait":"bg-green-600 hover:bg-green-700"}`,children:e.stock<=0?"Sin Stock":o?"Agregando...":"Agregar"})]})]})]})}let u=[{id:1,nombre:"Ramo de 12 Rosas Rojas",slug:"ramo-12-rosas-rojas",descripcion:"Hermoso ramo de 12 rosas rojas frescas, perfectas para expresar amor y pasi\xf3n. Incluye papel decorativo elegante.",descripcion_corta:"Ramo de 12 rosas rojas",categoria:{nombre:"Ramos",slug:"ramos",descripcion:"Ramos florales",imagen:null},precio:"45.99",precio_descuento:null,precio_final:"45.99",porcentaje_descuento:null,stock:15,is_featured:!0,is_active:!0,envio_gratis:!0,tipo_flor:{id:1,nombre:"Rosas",descripcion:"Flores tipo rosas",is_active:!0},ocasiones:[{id:1,nombre:"Amor",descripcion:"",is_active:!0},{id:4,nombre:"Aniversario",descripcion:"",is_active:!0},{id:2,nombre:"Cumplea\xf1os",descripcion:"",is_active:!0}],imagen_principal:"/images/no-image.jpg",imagenes:[]}];function p(){let[e]=(0,t.useState)(u);return(0,s.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[s.jsx(a.Toaster,{position:"top-center"}),s.jsx("div",{className:"bg-amber-50 border-l-4 border-amber-500 p-5 rounded-md shadow-md mb-6",role:"alert",children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-amber-500 mt-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("span",{className:"inline-block px-2 py-1 bg-amber-200 text-amber-800 text-xs font-semibold rounded-md mr-2",children:"MODO SIN CONEXI\xd3N"}),s.jsx("span",{className:"inline-block px-2 py-1 bg-red-200 text-red-800 text-xs font-semibold rounded-md",children:"SIN CONEXI\xd3N AL SERVIDOR"})]}),s.jsx("h3",{className:"text-lg font-semibold text-amber-800 mt-1",children:"Cat\xe1logo de demostraci\xf3n"}),(0,s.jsxs)("div",{className:"mt-2 text-amber-700",children:[(0,s.jsxs)("p",{className:"mb-1",children:["Est\xe1s utilizando una versi\xf3n ",s.jsx("strong",{children:"sin conexi\xf3n"})," del cat\xe1logo con productos de demostraci\xf3n."]}),s.jsx("p",{children:"El carrito funcionar\xe1 de manera local y los datos se guardar\xe1n en tu navegador hasta que se restablezca la conexi\xf3n."})]}),s.jsx("div",{className:"mt-3 flex",children:(0,s.jsxs)("a",{href:"/",className:"text-amber-600 hover:text-amber-800 font-medium flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Intentar volver al modo normal"]})})]})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold",children:[s.jsx("span",{className:"text-gray-800",children:"Florer\xeda Cristina"}),s.jsx("span",{className:"bg-amber-200 text-amber-800 text-lg px-3 py-1 ml-3 rounded-full",children:"Modo Offline"})]}),s.jsx("div",{className:"flex space-x-2",children:(0,s.jsxs)("a",{href:"/",className:"bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 px-4 py-2 rounded-md shadow-sm text-sm font-medium flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Inicio"]})})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:e.map(e=>s.jsx(m,{product:e},e.id))}),(0,s.jsxs)("div",{className:"mt-12 bg-gray-50 rounded-lg p-6 border border-gray-200 shadow-sm",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Informaci\xf3n sobre el modo sin conexi\xf3n"}),s.jsx("p",{className:"text-gray-600 mb-3",children:"En este modo, todas las operaciones se realizan localmente en tu navegador. Los productos mostrados son solo para demostraci\xf3n."}),s.jsx("div",{className:"flex flex-wrap gap-3 items-center mt-4",children:(0,s.jsxs)("a",{href:"/",className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md shadow-sm flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Intentar reconectar"]})})]})]})}},5047:(e,r,o)=>{"use strict";var s=o(7389);o.o(s,"useParams")&&o.d(r,{useParams:function(){return s.useParams}}),o.o(s,"useRouter")&&o.d(r,{useRouter:function(){return s.useRouter}}),o.o(s,"useSearchParams")&&o.d(r,{useSearchParams:function(){return s.useSearchParams}})},907:(e,r,o)=>{"use strict";o.r(r),o.d(r,{default:()=>s});let s=(0,o(8570).createProxy)(String.raw`C:\Users\dmazzucco\OneDrive - SA San Miguel A.G.I.C.I. y F\Escritorio\Daniel Mazuzzcco Personal\e-comerce\frontend\app\modo-offline\page.tsx#default`)}};var r=require("../../webpack-runtime.js");r.C(e);var o=e=>r(r.s=e),s=r.X(0,[8948,2063,6744],()=>o(5131));module.exports=s})();