(()=>{var e={};e.id=9264,e.ids=[9264],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6357:(e,r,o)=>{"use strict";o.r(r),o.d(r,{GlobalError:()=>t.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),o(3973),o(9293),o(5866);var s=o(3191),a=o(8716),i=o(7922),t=o.n(i),n=o(5231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);o.d(r,l);let c=["",{children:["productos",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(o.bind(o,3973)),"C:\\Users\\dmazzucco\\OneDrive - SA San Miguel A.G.I.C.I. y F\\Escritorio\\Daniel Mazuzzcco Personal\\e-comerce\\frontend\\app\\productos\\page.tsx"]}]},{metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}]},{layout:[()=>Promise.resolve().then(o.bind(o,9293)),"C:\\Users\\dmazzucco\\OneDrive - SA San Miguel A.G.I.C.I. y F\\Escritorio\\Daniel Mazuzzcco Personal\\e-comerce\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(o.t.bind(o,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}],d=["C:\\Users\\dmazzucco\\OneDrive - SA San Miguel A.G.I.C.I. y F\\Escritorio\\Daniel Mazuzzcco Personal\\e-comerce\\frontend\\app\\productos\\page.tsx"],u="/productos/page",m={require:o,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/productos/page",pathname:"/productos",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8554:(e,r,o)=>{Promise.resolve().then(o.bind(o,9958))},9958:(e,r,o)=>{"use strict";o.d(r,{default:()=>l});var s=o(326),a=o(7577),i=o(5047);function t({product:e}){let r=(0,i.useRouter)(),o=(0,a.useMemo)(()=>{let r="/images/no-image.jpg";try{let o=e.imagen_principal;if(!o||"null"===o||"undefined"===o)return console.log("Sin imagen para producto:",e.nombre),r;if(o.startsWith("/media/")){let r=`http://localhost${o}`;return console.log("✅ Imagen del backend:",e.nombre,r),r}if(o.includes("web:8000")){let e=o.replace("web:8000","localhost");return console.log("✅ URL Docker corregida:",e),e}if((o.startsWith("http://")||o.startsWith("https://"))&&!o.includes("placeholder.com"))return o;return r}catch(e){return console.error("Error procesando URL de imagen:",e),r}},[e.imagen_principal,e.nombre]),t=e.id.toString();return s.jsx("div",{onClick:()=>{console.log("\uD83D\uDD17 Click en ProductCard, navegando a:",`/productos/${t}`),r.push(`/productos/${t}`)},className:"block cursor-pointer",children:(0,s.jsxs)("div",{className:"group bg-white rounded-xl shadow-sm hover:shadow-2xl transition-all duration-500 overflow-hidden border border-gray-100 hover:border-gray-200 transform hover:-translate-y-2 cursor-pointer",children:[(0,s.jsxs)("div",{className:"relative aspect-square bg-gradient-to-br from-gray-50 to-gray-100 overflow-hidden",children:[e.envio_gratis&&s.jsx("div",{className:"absolute top-3 right-3 bg-green-600 text-white text-xs px-3 py-1.5 rounded-full font-semibold z-10 shadow-md",children:"Env\xedo gratis"}),s.jsx("img",{src:o,alt:e.nombre||"Producto",className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110",onError:r=>{let o=r.target;console.log("Error cargando imagen, usando fallback para:",e.nombre),o.src="/images/no-image.jpg",o.classList.add("p-4","object-contain")},loading:"lazy"},`product-${e.id}-img`),s.jsx("div",{className:"absolute inset-0 bg-black opacity-0 group-hover:opacity-5 transition-opacity duration-500"})]}),(0,s.jsxs)("div",{className:"p-5",children:[s.jsx("h3",{className:"font-serif text-gray-900 text-base mb-3 line-clamp-2 min-h-[3rem] leading-relaxed tracking-wide",children:e.nombre}),e.descripcion_corta&&s.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:e.descripcion_corta}),s.jsx("div",{className:"flex items-baseline justify-between mb-4",children:e.precio_descuento?(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsxs)("span",{className:"text-xl font-bold text-green-700",children:["$ ",parseFloat(e.precio_descuento).toLocaleString()]}),(0,s.jsxs)("span",{className:"text-sm text-gray-400 line-through",children:["$ ",parseFloat(e.precio).toLocaleString()]})]}):(0,s.jsxs)("span",{className:"text-xl font-bold text-gray-900",children:["$ ",parseFloat(e.precio).toLocaleString()]})}),s.jsx("div",{className:"w-full bg-green-700 hover:bg-green-800 text-white font-medium py-3 px-4 rounded-lg transition-all duration-300 text-sm shadow-sm hover:shadow-md text-center",children:"Ver detalles"})]})]})})}o(1678);let n=({onFiltersChange:e,className:r=""})=>{let[o,i]=(0,a.useState)([]),[t,n]=(0,a.useState)([]),[l,c]=(0,a.useState)({}),[d,u]=(0,a.useState)(!0);console.log("\uD83D\uDD25 ProductFilters RENDERIZADO!",{loading:d,tiposFlor:o.length,ocasiones:t.length}),(0,a.useEffect)(()=>{(async()=>{try{console.log("\uD83D\uDD0D Loading filter data..."),await new Promise(e=>setTimeout(e,500));let e=[{id:1,nombre:"Rosas"},{id:2,nombre:"Tulipanes"},{id:3,nombre:"Girasoles"},{id:4,nombre:"Orqu\xeddeas"},{id:5,nombre:"Mixto"},{id:6,nombre:"Lilium"},{id:7,nombre:"Gerberas"}],r=[{id:1,nombre:"Amor"},{id:2,nombre:"San Valent\xedn"},{id:3,nombre:"Aniversario"},{id:4,nombre:"Cumplea\xf1os"},{id:5,nombre:"Felicitaciones"},{id:6,nombre:"Graduaci\xf3n"},{id:7,nombre:"Amistad"},{id:8,nombre:"Alegr\xeda"},{id:9,nombre:"Boda"},{id:10,nombre:"Elegancia"},{id:11,nombre:"Pureza"},{id:12,nombre:"Decoraci\xf3n"},{id:13,nombre:"Lujo"}];console.log("\uD83C\uDF38 Mock tipos de flor loaded:",e.length),console.log("\uD83C\uDF89 Mock ocasiones loaded:",r.length),i(e),n(r)}catch(e){console.error("\uD83D\uDCA5 Error loading filter data:",e)}})()},[]),(0,a.useEffect)(()=>{e(l)},[l,e]);let m=(e,r)=>{c(o=>({...o,[e]:""===r?void 0:r}))},p=Object.keys(l).some(e=>void 0!==l[e]);return(0,s.jsxs)("div",{className:`product-filters ${r}`,children:[(0,s.jsxs)("div",{className:"filters-header",children:[s.jsx("h3",{children:"\uD83D\uDD0D Filtros de Productos"}),p&&s.jsx("button",{onClick:()=>{c({})},className:"clear-filters-btn",children:"\uD83D\uDDD1️ Limpiar filtros"})]}),d?s.jsx("div",{className:"loading-state",children:s.jsx("p",{children:"Cargando filtros..."})}):(0,s.jsxs)("div",{className:"filters-content",children:[(0,s.jsxs)("div",{className:"filter-group",children:[s.jsx("label",{className:"filter-label",children:"\uD83C\uDF38 Tipo de Flor"}),(0,s.jsxs)("select",{value:l.tipo_flor||"",onChange:e=>m("tipo_flor",e.target.value?parseInt(e.target.value):void 0),className:"filter-select","aria-label":"Seleccionar tipo de flor",children:[s.jsx("option",{value:"",children:"Todos los tipos"}),o.map(e=>s.jsx("option",{value:e.id,children:e.nombre},e.id))]})]}),(0,s.jsxs)("div",{className:"filter-group",children:[s.jsx("label",{className:"filter-label",children:"\uD83C\uDF89 Ocasi\xf3n"}),(0,s.jsxs)("select",{value:l.ocasion||"",onChange:e=>m("ocasion",e.target.value?parseInt(e.target.value):void 0),className:"filter-select","aria-label":"Seleccionar ocasi\xf3n",children:[s.jsx("option",{value:"",children:"Todas las ocasiones"}),t.map(e=>s.jsx("option",{value:e.id,children:e.nombre},e.id))]})]}),(0,s.jsxs)("div",{className:"filter-group",children:[s.jsx("label",{className:"filter-label",children:"\uD83D\uDCB0 Precio"}),(0,s.jsxs)("div",{className:"price-range",children:[s.jsx("input",{type:"number",placeholder:"M\xedn",value:l.precio_min||"",onChange:e=>m("precio_min",e.target.value?parseFloat(e.target.value):void 0),className:"price-input"}),s.jsx("span",{children:"-"}),s.jsx("input",{type:"number",placeholder:"M\xe1x",value:l.precio_max||"",onChange:e=>m("precio_max",e.target.value?parseFloat(e.target.value):void 0),className:"price-input"})]})]}),(0,s.jsxs)("div",{className:"filter-group",children:[s.jsx("label",{className:"filter-label",children:"\uD83D\uDCCA Ordenar por"}),(0,s.jsxs)("select",{value:l.ordering||"",onChange:e=>m("ordering",e.target.value||void 0),className:"filter-select","aria-label":"Seleccionar orden de productos",children:[s.jsx("option",{value:"",children:"M\xe1s recientes"}),s.jsx("option",{value:"nombre",children:"Nombre A-Z"}),s.jsx("option",{value:"-nombre",children:"Nombre Z-A"}),s.jsx("option",{value:"precio",children:"Precio menor"}),s.jsx("option",{value:"-precio",children:"Precio mayor"})]})]}),s.jsx("div",{className:"filter-group",children:(0,s.jsxs)("label",{className:"filter-checkbox",children:[s.jsx("input",{type:"checkbox",checked:l.destacados||!1,onChange:e=>m("destacados",e.target.checked||void 0)}),"⭐ Solo destacados"]})}),s.jsx("div",{className:"filter-group",children:(0,s.jsxs)("label",{className:"filter-checkbox",children:[s.jsx("input",{type:"checkbox",checked:l.adicionales||!1,onChange:e=>m("adicionales",e.target.checked||void 0)}),"\uD83C\uDF81 Solo adicionales"]})})]})]})};function l({showRecommended:e=!1,showAdditionals:r=!1,showFilters:o}){let[l,c]=(0,a.useState)([]),[d,u]=(0,a.useState)([]),[m,p]=(0,a.useState)(!0),[x,g]=(0,a.useState)(null),[h,b]=(0,a.useState)([]);(0,i.useSearchParams)();let f=e=>{console.log("\uD83D\uDD04 Aplicando filtros:",e);let r=[...l],o=[{id:1,nombre:"Rosas"},{id:2,nombre:"Tulipanes"},{id:3,nombre:"Girasoles"},{id:4,nombre:"Gerberas"},{id:5,nombre:"Mixto"},{id:6,nombre:"Orqu\xeddeas"}],s=[{id:1,nombre:"Amor"},{id:2,nombre:"Cumplea\xf1os"},{id:3,nombre:"Amistad"},{id:4,nombre:"Aniversario"},{id:5,nombre:"Agradecimiento"}];if(e.tipo_flor&&e.tipo_flor.length>0){let s=e.tipo_flor.map(e=>{let r=o.find(r=>r.id===e);return r?r.nombre:""}).filter(Boolean);console.log("\uD83C\uDF38 Filtrando por tipos de flor:",s),r=r.filter(e=>s.includes(e.tipo_flor?.nombre))}if(e.ocasion&&e.ocasion.length>0){let o=e.ocasion.map(e=>{let r=s.find(r=>r.id===e);return r?r.nombre:""}).filter(Boolean);console.log("\uD83C\uDF89 Filtrando por ocasiones:",o),r=r.filter(e=>e.ocasiones?.some(e=>o.includes(e.nombre)))}if(void 0!==e.precio_min&&null!==e.precio_min&&(console.log("\uD83D\uDCB0 Filtrando precio m\xednimo:",e.precio_min),r=r.filter(r=>parseFloat(r.precio_descuento||r.precio)>=e.precio_min)),void 0!==e.precio_max&&null!==e.precio_max&&(console.log("\uD83D\uDCB0 Filtrando precio m\xe1ximo:",e.precio_max),r=r.filter(r=>parseFloat(r.precio_descuento||r.precio)<=e.precio_max)),e.destacados&&(console.log("⭐ Filtrando solo destacados"),r=r.filter(e=>e.is_featured)),e.ordering)switch(console.log("\uD83D\uDCCA Ordenando por:",e.ordering),e.ordering){case"precio_asc":r.sort((e,r)=>parseFloat(e.precio_descuento||e.precio)-parseFloat(r.precio_descuento||r.precio));break;case"precio_desc":r.sort((e,r)=>{let o=parseFloat(e.precio_descuento||e.precio);return parseFloat(r.precio_descuento||r.precio)-o});break;case"nombre_asc":r.sort((e,r)=>e.nombre.localeCompare(r.nombre));break;case"nombre_desc":r.sort((e,r)=>r.nombre.localeCompare(e.nombre))}console.log("✅ Productos despu\xe9s de filtros:",r.length),u(r),b(r)};if(m)return s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-700"})});if(x){let e=x.includes("MODO SIN CONEXI\xd3N");return s.jsx("div",{className:"text-center py-6 mb-4",children:s.jsx("div",{className:`${e?"bg-amber-50 border-amber-200":"bg-red-50 border-red-200"} border rounded-lg p-6 max-w-2xl mx-auto shadow-sm`,children:e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[s.jsx("span",{className:"text-2xl mr-2",children:"⚠️"}),s.jsx("h3",{className:"text-amber-800 font-semibold",children:"Modo Sin Conexi\xf3n"})]}),s.jsx("p",{className:"text-amber-700 mb-2",children:"No se pudo establecer conexi\xf3n con el servidor."}),s.jsx("p",{className:"text-amber-600",children:"Mostrando productos de demostraci\xf3n sin precios ni im\xe1genes reales."})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx("h3",{className:"text-red-800 font-semibold mb-2",children:"Error al cargar productos"}),s.jsx("p",{className:"text-red-600",children:x})]})})})}return(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("span",{className:"text-2xl",children:"\uD83C\uDF38"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:e?"Productos Recomendados":r?"Productos Adicionales":"Cat\xe1logo de Productos"})]}),(0,s.jsxs)("p",{className:"text-gray-600",children:["Mostrando ",h.length," de ",l.length," productos disponibles"]})]}),(void 0!==o?o:!e&&!r)&&s.jsx("div",{className:"mb-8",children:s.jsx(n,{onFiltersChange:f})}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8 mt-8 px-2",children:h.map(e=>s.jsx(t,{product:e},e.id))}),0===h.length&&s.jsx("div",{className:"text-center py-12",children:(0,s.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8 max-w-md mx-auto",children:[s.jsx("h3",{className:"text-gray-800 font-semibold mb-2",children:"No se encontraron productos"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Intenta ajustar los filtros para ver m\xe1s resultados"}),s.jsx("button",{onClick:()=>f({}),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Limpiar Filtros"})]})})]})}},5047:(e,r,o)=>{"use strict";var s=o(7389);o.o(s,"useParams")&&o.d(r,{useParams:function(){return s.useParams}}),o.o(s,"useRouter")&&o.d(r,{useRouter:function(){return s.useRouter}}),o.o(s,"useSearchParams")&&o.d(r,{useSearchParams:function(){return s.useSearchParams}})},3973:(e,r,o)=>{"use strict";o.r(r),o.d(r,{default:()=>t});var s=o(9510),a=o(1159);let i=(0,o(8570).createProxy)(String.raw`C:\Users\dmazzucco\OneDrive - SA San Miguel A.G.I.C.I. y F\Escritorio\Daniel Mazuzzcco Personal\e-comerce\frontend\app\components\ProductListClient.tsx#default`);function t(){return s.jsx("div",{className:"w-full",children:s.jsx(a.Suspense,{fallback:s.jsx("div",{className:"p-8 text-center",children:"Cargando productos..."}),children:s.jsx(i,{showFilters:!0})})})}},1678:()=>{}};var r=require("../../webpack-runtime.js");r.C(e);var o=e=>r(r.s=e),s=r.X(0,[8948,2063,6744],()=>o(6357));module.exports=s})();