(()=>{var e={};e.id=3,e.ids=[3],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5058:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>l,routeModule:()=>u,tree:()=>d}),s(8748),s(9293),s(5866);var t=s(3191),a=s(8716),o=s(7922),n=s.n(o),i=s(5231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);s.d(r,c);let d=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8748)),"C:\\Users\\dmazzucco\\OneDrive - SA San Miguel A.G.I.C.I. y F\\Escritorio\\Daniel Mazuzzcco Personal\\e-comerce\\frontend\\app\\admin\\page.tsx"]}]},{metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}]},{layout:[()=>Promise.resolve().then(s.bind(s,9293)),"C:\\Users\\dmazzucco\\OneDrive - SA San Miguel A.G.I.C.I. y F\\Escritorio\\Daniel Mazuzzcco Personal\\e-comerce\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}],l=["C:\\Users\\dmazzucco\\OneDrive - SA San Miguel A.G.I.C.I. y F\\Escritorio\\Daniel Mazuzzcco Personal\\e-comerce\\frontend\\app\\admin\\page.tsx"],m="/admin/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2672:(e,r,s)=>{Promise.resolve().then(s.bind(s,6999))},6999:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>i});var t=s(326),a=s(7577),o=s(5047);function n({onProductAdded:e}){let[r,s]=(0,a.useState)([]),[o,n]=(0,a.useState)([]),[i,c]=(0,a.useState)(!1),[d,l]=(0,a.useState)(""),[m,x]=(0,a.useState)(""),[u,p]=(0,a.useState)({nombre:"",descripcion:"",descripcion_corta:"",precio:"",stock:"",categoria:"",tipo:"",sku:"",is_active:!0,is_featured:!1,porcentaje_descuento:"0"}),g=()=>"http://web:8000",h=e=>{let{name:r,value:s,type:t}=e.target;if("checkbox"===t){let s=e.target;p(e=>({...e,[r]:s.checked}))}else p(e=>({...e,[r]:s}))},b=()=>{let e=Date.now().toString().slice(-6),r=Math.floor(1e3*Math.random()).toString().padStart(3,"0");return`PROD-${e}-${r}`},f=async r=>{r.preventDefault(),c(!0),l(""),x("");try{let r={...u,precio:parseFloat(u.precio),stock:parseInt(u.stock),categoria:parseInt(u.categoria),tipo:parseInt(u.tipo),porcentaje_descuento:parseFloat(u.porcentaje_descuento),sku:u.sku||b()},s=await fetch(`${g()}/api/catalogo/productos/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(s.ok)x("\xa1Producto agregado exitosamente!"),p({nombre:"",descripcion:"",descripcion_corta:"",precio:"",stock:"",categoria:"",tipo:"",sku:"",is_active:!0,is_featured:!1,porcentaje_descuento:"0"}),e();else{let e=await s.json();l(`Error: ${JSON.stringify(e)}`)}}catch(e){console.error("Error adding product:",e),l("Error al agregar el producto")}finally{c(!1)}};return t.jsx("div",{className:"bg-white shadow sm:rounded-lg",children:(0,t.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[t.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-6",children:"Agregar Nuevo Producto"}),d&&t.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:d}),m&&t.jsx("div",{className:"mb-4 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded",children:m}),(0,t.jsxs)("form",{onSubmit:f,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"nombre",className:"block text-sm font-medium text-gray-700",children:"Nombre del Producto *"}),t.jsx("input",{type:"text",name:"nombre",id:"nombre",required:!0,value:u.nombre,onChange:h,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-600 focus:border-green-600 sm:text-sm",placeholder:"Ej: Ramo de Rosas Rojas"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"sku",className:"block text-sm font-medium text-gray-700",children:"SKU (opcional)"}),t.jsx("input",{type:"text",name:"sku",id:"sku",value:u.sku,onChange:h,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-600 focus:border-green-600 sm:text-sm",placeholder:"Se generar\xe1 autom\xe1ticamente si se deja vac\xedo"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"precio",className:"block text-sm font-medium text-gray-700",children:"Precio *"}),t.jsx("input",{type:"number",name:"precio",id:"precio",required:!0,min:"0",step:"0.01",value:u.precio,onChange:h,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-600 focus:border-green-600 sm:text-sm",placeholder:"25000.00"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"stock",className:"block text-sm font-medium text-gray-700",children:"Stock *"}),t.jsx("input",{type:"number",name:"stock",id:"stock",required:!0,min:"0",value:u.stock,onChange:h,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-600 focus:border-green-600 sm:text-sm",placeholder:"10"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"categoria",className:"block text-sm font-medium text-gray-700",children:"Categor\xeda *"}),(0,t.jsxs)("select",{name:"categoria",id:"categoria",required:!0,value:u.categoria,onChange:h,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-600 focus:border-green-600 sm:text-sm",children:[t.jsx("option",{value:"",children:"Seleccionar categor\xeda"}),r.map(e=>t.jsx("option",{value:e.id,children:e.nombre},e.id))]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"tipo",className:"block text-sm font-medium text-gray-700",children:"Tipo de Flor *"}),(0,t.jsxs)("select",{name:"tipo",id:"tipo",required:!0,value:u.tipo,onChange:h,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-600 focus:border-green-600 sm:text-sm",children:[t.jsx("option",{value:"",children:"Seleccionar tipo"}),o.map(e=>t.jsx("option",{value:e.id,children:e.nombre},e.id))]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"porcentaje_descuento",className:"block text-sm font-medium text-gray-700",children:"Descuento (%)"}),t.jsx("input",{type:"number",name:"porcentaje_descuento",id:"porcentaje_descuento",min:"0",max:"100",step:"0.01",value:u.porcentaje_descuento,onChange:h,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-600 focus:border-green-600 sm:text-sm",placeholder:"0"})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"descripcion_corta",className:"block text-sm font-medium text-gray-700",children:"Descripci\xf3n Corta"}),t.jsx("input",{type:"text",name:"descripcion_corta",id:"descripcion_corta",value:u.descripcion_corta,onChange:h,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-600 focus:border-green-600 sm:text-sm",placeholder:"Breve descripci\xf3n del producto"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-gray-700",children:"Descripci\xf3n Completa"}),t.jsx("textarea",{name:"descripcion",id:"descripcion",rows:4,value:u.descripcion,onChange:h,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-green-600 focus:border-green-600 sm:text-sm",placeholder:"Descripci\xf3n detallada del producto..."})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("input",{id:"is_active",name:"is_active",type:"checkbox",checked:u.is_active,onChange:h,className:"h-4 w-4 text-green-700 focus:ring-green-600 border-gray-300 rounded"}),t.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Producto activo"})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("input",{id:"is_featured",name:"is_featured",type:"checkbox",checked:u.is_featured,onChange:h,className:"h-4 w-4 text-green-700 focus:ring-green-600 border-gray-300 rounded"}),t.jsx("label",{htmlFor:"is_featured",className:"ml-2 block text-sm text-gray-900",children:"Producto destacado"})]})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{type:"submit",disabled:i,className:"bg-green-700 border border-transparent rounded-md shadow-sm py-2 px-4 inline-flex justify-center text-sm font-medium text-white hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-600 disabled:opacity-50 disabled:cursor-not-allowed",children:i?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Agregando..."]}):"Agregar Producto"})})]})]})})}function i(){let[e,r]=(0,a.useState)([]),[s,i]=(0,a.useState)([]),[c,d]=(0,a.useState)("products"),[l,m]=(0,a.useState)(!0),[x,u]=(0,a.useState)(""),p=(0,o.useRouter)(),g=()=>"http://web:8000",h=async()=>{try{let e=await fetch(`${g()}/api/catalogo/productos/`);if(e.ok){let s=await e.json();r(s.results||s)}}catch(e){console.error("Error fetching products:",e),u("Error cargando productos")}},b=async(e,r)=>{try{(await fetch(`${g()}/api/catalogo/productos/${e}/`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_active:!r})})).ok?await h():u("Error actualizando producto")}catch(e){console.error("Error updating product:",e),u("Error actualizando producto")}};return l?t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-700 mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando dashboard..."})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("header",{className:"bg-white shadow-sm border-b",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center py-4",children:[t.jsx("div",{className:"flex items-center",children:t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"\uD83C\uDF38 Admin - Florer\xeda Cristina"})}),t.jsx("button",{onClick:()=>p.push("/"),className:"bg-green-700 text-white px-4 py-2 rounded-lg hover:bg-green-800 transition-colors",children:"Ver Tienda"})]})})}),t.jsx("div",{className:"bg-white border-b",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("nav",{className:"flex space-x-8",children:[(0,t.jsxs)("button",{onClick:()=>d("products"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"products"===c?"border-green-600 text-green-700":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Productos (",e.length,")"]}),(0,t.jsxs)("button",{onClick:()=>d("categories"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"categories"===c?"border-green-600 text-green-700":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Categor\xedas (",s.length,")"]}),t.jsx("button",{onClick:()=>d("add-product"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"add-product"===c?"border-green-600 text-green-700":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"âž• Agregar Producto"})]})})}),(0,t.jsxs)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:[x&&t.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:x}),"products"===c&&(0,t.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[(0,t.jsxs)("div",{className:"px-4 py-5 sm:px-6",children:[t.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Gesti\xf3n de Productos"}),t.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Lista de todos los productos en el cat\xe1logo"})]}),t.jsx("ul",{className:"divide-y divide-gray-200",children:e.map(e=>t.jsx("li",{className:"px-4 py-4 sm:px-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"h-10 w-10 bg-green-100 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-green-700 font-medium",children:e.nombre.charAt(0)})})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.nombre}),e.is_featured&&t.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Destacado"})]}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["SKU: ",e.sku," | Categor\xeda: ",e.categoria?.nombre," | Stock: ",e.stock]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("span",{className:"text-lg font-semibold text-green-600",children:["$",parseFloat(e.precio).toLocaleString()]}),t.jsx("button",{onClick:()=>b(e.id,e.is_active),className:`px-3 py-1 rounded-full text-xs font-medium ${e.is_active?"bg-green-100 text-green-800 hover:bg-green-200":"bg-red-100 text-red-800 hover:bg-red-200"}`,children:e.is_active?"Activo":"Inactivo"})]})]})},e.id))})]}),"categories"===c&&(0,t.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[(0,t.jsxs)("div",{className:"px-4 py-5 sm:px-6",children:[t.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Gesti\xf3n de Categor\xedas"}),t.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Lista de todas las categor\xedas disponibles"})]}),t.jsx("ul",{className:"divide-y divide-gray-200",children:s.map(e=>t.jsx("li",{className:"px-4 py-4 sm:px-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"h-10 w-10 bg-purple-100 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-purple-600 font-medium",children:e.nombre.charAt(0)})})}),(0,t.jsxs)("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.nombre}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["ID: ",e.id]})]})]}),t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.is_active?"Activa":"Inactiva"})]})},e.id))})]}),"add-product"===c&&t.jsx(n,{onProductAdded:h})]})]})}},5047:(e,r,s)=>{"use strict";var t=s(7389);s.o(t,"useParams")&&s.d(r,{useParams:function(){return t.useParams}}),s.o(t,"useRouter")&&s.d(r,{useRouter:function(){return t.useRouter}}),s.o(t,"useSearchParams")&&s.d(r,{useSearchParams:function(){return t.useSearchParams}})},8748:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});let t=(0,s(8570).createProxy)(String.raw`C:\Users\dmazzucco\OneDrive - SA San Miguel A.G.I.C.I. y F\Escritorio\Daniel Mazuzzcco Personal\e-comerce\frontend\app\admin\page.tsx#default`)}};var r=require("../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[8948,2063,6744],()=>s(5058));module.exports=t})();