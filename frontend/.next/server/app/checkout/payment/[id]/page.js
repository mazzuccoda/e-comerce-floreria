(()=>{var e={};e.id=4615,e.ids=[4615],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8460:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d}),t(3914),t(9293),t(5866);var r=t(3191),a=t(8716),i=t(7922),n=t.n(i),o=t(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(s,l);let d=["",{children:["checkout",{children:["payment",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3914)),"C:\\Users\\dmazzucco\\OneDrive - SA San Miguel A.G.I.C.I. y F\\Escritorio\\Daniel Mazuzzcco Personal\\e-comerce\\frontend\\app\\checkout\\payment\\[id]\\page.tsx"]}]},{}]},{}]},{metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}]},{layout:[()=>Promise.resolve().then(t.bind(t,9293)),"C:\\Users\\dmazzucco\\OneDrive - SA San Miguel A.G.I.C.I. y F\\Escritorio\\Daniel Mazuzzcco Personal\\e-comerce\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}],c=["C:\\Users\\dmazzucco\\OneDrive - SA San Miguel A.G.I.C.I. y F\\Escritorio\\Daniel Mazuzzcco Personal\\e-comerce\\frontend\\app\\checkout\\payment\\[id]\\page.tsx"],m="/checkout/payment/[id]/page",x={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/checkout/payment/[id]/page",pathname:"/checkout/payment/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1859:(e,s,t)=>{Promise.resolve().then(t.bind(t,6553))},6553:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var r=t(326),a=t(7577),i=t(5047),n=t(6226),o=t(434),l=t(381);let d=()=>{let e=(0,i.useRouter)(),s=(0,i.useParams)().id,[t,d]=(0,a.useState)(null),[c,m]=(0,a.useState)(!0),[x,p]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let t=async()=>{try{let e=await fetch(`${process.env.NEXT_PUBLIC_API_BASE_URL}/api/pedidos/${s}/`,{credentials:"include"});if(!e.ok)throw Error("Pedido no encontrado");let t=await e.json();d(t)}catch(s){console.error("Error fetching pedido:",s),l.ZP.error("Error al cargar el pedido"),e.push("/")}finally{m(!1)}};s&&t()},[s,e]);let u=e=>new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(e),h=async()=>{if(!t)return;p(!0);let e=l.ZP.loading("Creando pago...");try{let s=await fetch(`${process.env.NEXT_PUBLIC_API_BASE_URL}/api/pedidos/crear-pago/`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({pedido_id:t.id})});if(l.ZP.dismiss(e),!s.ok){let e=await s.json();throw Error(e.error||"Error al crear el pago")}let r=await s.json();if(r.init_point)window.location.href=r.init_point;else throw Error("No se pudo obtener el enlace de pago")}catch(s){l.ZP.dismiss(e),l.ZP.error(s.message||"Error al procesar el pago")}finally{p(!1)}};if(c)return r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"flex items-center justify-center min-h-64",children:r.jsx("div",{className:"w-8 h-8 border-4 border-gray-300 border-t-blue-600 rounded-full animate-spin"})})});if(!t)return r.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"text-center py-16",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Pedido no encontrado"}),r.jsx(o.default,{href:"/",className:"inline-block px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Volver al inicio"})]})});let g=t.total+t.metodo_envio.precio;return r.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Confirmar Pago"}),(0,r.jsxs)("p",{className:"text-gray-600",children:["Pedido #",t.numero_pedido]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informaci\xf3n de Entrega"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Nombre"}),r.jsx("p",{className:"font-medium",children:t.nombre_completo})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),r.jsx("p",{className:"font-medium",children:t.email})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Tel\xe9fono"}),r.jsx("p",{className:"font-medium",children:t.telefono})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Direcci\xf3n"}),r.jsx("p",{className:"font-medium",children:t.direccion}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[t.ciudad,", ",t.codigo_postal]})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Fecha de entrega"}),r.jsx("p",{className:"font-medium",children:new Date(t.fecha_entrega).toLocaleDateString("es-AR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"M\xe9todo de env\xedo"}),r.jsx("p",{className:"font-medium",children:t.metodo_envio.nombre}),r.jsx("p",{className:"text-sm text-gray-500",children:t.metodo_envio.tiempo_estimado})]}),t.notas&&(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Notas"}),r.jsx("p",{className:"font-medium",children:t.notas})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Productos"}),r.jsx("div",{className:"space-y-4",children:t.items.map(e=>(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"relative w-16 h-16 flex-shrink-0",children:r.jsx(n.default,{src:e.producto.imagen_principal||"/placeholder-product.jpg",alt:e.producto.nombre,fill:!0,className:"object-cover rounded-lg"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-medium text-gray-900 truncate",children:e.producto.nombre}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Cantidad: ",e.quantity," \xd7 ",u(e.precio)]})]}),r.jsx("div",{className:"text-right",children:r.jsx("p",{className:"font-medium text-gray-900",children:u(e.total_price)})})]},e.id))})]})]}),r.jsx("div",{className:"lg:col-span-1",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6 sticky top-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Resumen del Pago"}),(0,r.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Subtotal"}),r.jsx("span",{className:"font-medium",children:u(t.total)})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Env\xedo"}),r.jsx("span",{className:"font-medium",children:0===t.metodo_envio.precio?"Gratis":u(t.metodo_envio.precio)})]}),r.jsx("div",{className:"border-t pt-3",children:(0,r.jsxs)("div",{className:"flex justify-between text-lg font-semibold",children:[r.jsx("span",{children:"Total a pagar"}),r.jsx("span",{children:u(g)})]})})]}),r.jsx("button",{onClick:h,disabled:x,className:"w-full bg-blue-600 text-white py-4 px-6 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium text-lg mb-4",children:x?(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Procesando..."]}):"Pagar con Mercado Pago"}),(0,r.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-4 h-4 mr-2 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Pago 100% seguro"]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-4 h-4 mr-2 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Protecci\xf3n al comprador"]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-4 h-4 mr-2 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"M\xfaltiples medios de pago"]})]}),(0,r.jsxs)("div",{className:"mt-6 pt-6 border-t",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"M\xe9todos de pago aceptados:"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[r.jsx("div",{className:"px-3 py-1 bg-gray-100 rounded text-xs font-medium text-gray-700",children:"Tarjetas de cr\xe9dito"}),r.jsx("div",{className:"px-3 py-1 bg-gray-100 rounded text-xs font-medium text-gray-700",children:"Tarjetas de d\xe9bito"}),r.jsx("div",{className:"px-3 py-1 bg-gray-100 rounded text-xs font-medium text-gray-700",children:"Transferencia"}),r.jsx("div",{className:"px-3 py-1 bg-gray-100 rounded text-xs font-medium text-gray-700",children:"Efectivo"})]})]}),r.jsx("div",{className:"mt-6 pt-6 border-t",children:r.jsx(o.default,{href:"/carrito",className:"block w-full text-center py-3 px-4 bg-gray-100 text-gray-900 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"Volver al carrito"})})]})})]})]})})}},5047:(e,s,t)=>{"use strict";var r=t(7389);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},3914:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`C:\Users\dmazzucco\OneDrive - SA San Miguel A.G.I.C.I. y F\Escritorio\Daniel Mazuzzcco Personal\e-comerce\frontend\app\checkout\payment\[id]\page.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[8948,2063,6226,6744],()=>t(8460));module.exports=r})();